<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[黑卓]]></title>
  <subtitle><![CDATA[Encode my life]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://www.xuerlove.com/"/>
  <updated>2017-02-07T05:51:50.000Z</updated>
  <id>http://www.xuerlove.com/</id>
  
  <author>
    <name><![CDATA[黑卓]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[linux下创建服务]]></title>
    <link href="http://www.xuerlove.com/2017/02/07/linux%E4%B8%8B%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1/"/>
    <id>http://www.xuerlove.com/2017/02/07/linux下创建服务/</id>
    <published>2017-02-07T05:42:57.000Z</published>
    <updated>2017-02-07T05:51:50.000Z</updated>
    <content type="html"><![CDATA[<h4 id="概述">概述</h4><p>我们通过在 /etc/init.d/ 目录下创建bash脚本，实现自定义服务，通过service命令，能够调用服务中的方法，通常一个服务存在 start stop restart status方法。<br><a id="more"></a></p>
<h4 id="例如">例如</h4><p>test<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span></span><br><span class="line"><span class="comment"># chkconfig: 2345 20 81</span></span><br><span class="line"><span class="comment"># description: test</span></span><br><span class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$1</span>"</span> <span class="keyword">in</span></span><br><span class="line">  start)</span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">"starting test:"</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"OK"</span></span><br><span class="line">  ;;</span><br><span class="line">  stop)</span><br><span class="line">  <span class="built_in">echo</span> -n <span class="string">"shutdown test:"</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"OK"</span></span><br><span class="line">  ;;</span><br><span class="line">  status)</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"test instance is running..."</span></span><br><span class="line">  ;;</span><br><span class="line">  restart)</span><br><span class="line">  <span class="variable">$0</span> stop</span><br><span class="line">  <span class="variable">$0</span> start</span><br><span class="line">  ;;</span><br><span class="line">  *)</span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"Usage:`basename <span class="variable">$0</span>` start|stop|status|restart"</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"><span class="built_in">exit</span> $?</span><br></pre></td></tr></table></figure></p>
<p>我们在 /etc/init.d/ 下面添加 test 脚本，然后给文件权限 sudo chmod -R 755, 之后我们就能够通过 </p>
<ul>
<li>sudo service start </li>
<li>sudo service stop </li>
<li>sudo service restart </li>
<li>sudo service status </li>
<li>sudo service<br>这些命令去调用我们的服务了</li>
</ul>
<h4 id="加入开机启动_chkconfig">加入开机启动 chkconfig</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">usage:   chkconfig [--list] [--type &lt;<span class="built_in">type</span>&gt;] [name]</span><br><span class="line">         chkconfig --add &lt;name&gt;</span><br><span class="line">         chkconfig --del &lt;name&gt;</span><br><span class="line">         chkconfig --override &lt;name&gt;</span><br><span class="line">         chkconfig [--level &lt;levels&gt;] [--type &lt;<span class="built_in">type</span>&gt;] &lt;name&gt; &lt;on|off|reset|resetpriorities&gt;</span><br></pre></td></tr></table></figure>
<p>sudo chkconfig –add test<br>sudo chkconfig test on</p>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="概述">概述</h4><p>我们通过在 /etc/init.d/ 目录下创建bash脚本，实现自定义服务，通过service命令，能够调用服务中的方法，通常一个服务存在 start stop restart status方法。<br>]]>
    
    </summary>
    
      <category term="linux" scheme="http://www.xuerlove.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[微信小程序开发]]></title>
    <link href="http://www.xuerlove.com/2016/11/03/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%BC%80%E5%8F%91/"/>
    <id>http://www.xuerlove.com/2016/11/03/微信小程序开发/</id>
    <published>2016-11-03T11:17:42.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h5 id="准备">准备</h5><ul>
<li>开发环境<ul>
<li>下载开发工具 (<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/download.html" target="_blank" rel="external">https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/download.html</a>)</li>
<li>按照网上教程破解 (<a href="https://github.com/gavinkwoe/weapp-ide-crack" target="_blank" rel="external">https://github.com/gavinkwoe/weapp-ide-crack</a>)</li>
<li>或者直接下载破解好的包</li>
</ul>
</li>
<li>学习资料<ul>
<li><a href="https://mp.weixin.qq.com/debug/wxadoc/dev/" target="_blank" rel="external">https://mp.weixin.qq.com/debug/wxadoc/dev/</a></li>
</ul>
</li>
</ul>
<a id="more"></a>
<h5 id="开始">开始</h5><ul>
<li>打开微信web开发者工具</li>
<li>AppID选择 无AppID 或者 随便写一个(破解后)</li>
<li>项目名称随便写</li>
<li>开发目录选择一个空的文件夹</li>
</ul>
<h5 id="项目目录">项目目录</h5><ul>
<li>文件<ul>
<li>app.js 必须 项目的主文件 小程序的逻辑</li>
<li>app.json 必须 小程序的公共设置</li>
<li>app.wxss 非必须 存放小程序的公共样式</li>
<li>各个文件编写规范以及配置的意义资料中讲的很详细,就不重新描述了。</li>
</ul>
</li>
<li>开发<blockquote>
<p>这个小应用中调用了一些wx的组件以及API,实现了一个列表的下拉刷新，上拉加载，每一项的左划菜单(删除，收藏等),开发时间有限，实现的比较粗糙，主要是为了把小程序开发这一套走一遍，知道小程序想干什么，能干什么，怎么干。下面只贴了部分代码。</p>
</blockquote>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line">App(&#123;</span><br><span class="line">  onLaunch: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'App Launch'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  onShow: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'App Show'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  onHide: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'App Hide'</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  globalData: &#123;</span><br><span class="line">    userInfo: <span class="literal">false</span>,</span><br><span class="line">    nightMode: <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.json</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"pages"</span>: [</span><br><span class="line">    <span class="string">"page/component/index/index"</span>,</span><br><span class="line">    <span class="string">"page/component/pic/pic"</span>,</span><br><span class="line">    <span class="string">"page/component/fav/fav"</span>,</span><br><span class="line">    <span class="string">"page/component/about/about"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"window"</span>: &#123;</span><br><span class="line">    <span class="string">"navigationBarTextStyle"</span>: <span class="string">"white"</span>,</span><br><span class="line">    <span class="string">"navigationBarTitleText"</span>: <span class="string">"Jokes"</span>,</span><br><span class="line">    <span class="string">"navigationBarBackgroundColor"</span>: <span class="string">"#353336"</span>,</span><br><span class="line">    <span class="string">"backgroundColor"</span>: <span class="string">"#353336"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"tabBar"</span>: &#123;</span><br><span class="line">    <span class="string">"color"</span>: <span class="string">"#000000"</span>,</span><br><span class="line">    <span class="string">"selectedColor"</span>: <span class="string">"#ffffff"</span>,</span><br><span class="line">    <span class="string">"borderStyle"</span>: <span class="string">"black"</span>,</span><br><span class="line">    <span class="string">"backgroundColor"</span>: <span class="string">"#413f40"</span>,</span><br><span class="line">    <span class="string">"list"</span>: [&#123;</span><br><span class="line">      <span class="string">"pagePath"</span>: <span class="string">"page/component/index/index"</span>,</span><br><span class="line">      <span class="string">"iconPath"</span>: <span class="string">"image/icon_jokes_default.png"</span>,</span><br><span class="line">      <span class="string">"selectedIconPath"</span>: <span class="string">"image/icon_jokes_active.png"</span>,</span><br><span class="line">      <span class="string">"text"</span>: <span class="string">"Jokes"</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="string">"pagePath"</span>: <span class="string">"page/component/pic/pic"</span>,</span><br><span class="line">      <span class="string">"iconPath"</span>: <span class="string">"image/icon_pic_default.png"</span>,</span><br><span class="line">      <span class="string">"selectedIconPath"</span>: <span class="string">"image/icon_pic_active.png"</span>,</span><br><span class="line">      <span class="string">"text"</span>: <span class="string">"Jokes"</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="string">"pagePath"</span>: <span class="string">"page/component/fav/fav"</span>,</span><br><span class="line">      <span class="string">"iconPath"</span>: <span class="string">"image/icon_fav_default.png"</span>,</span><br><span class="line">      <span class="string">"selectedIconPath"</span>: <span class="string">"image/icon_fav_active.png"</span>,</span><br><span class="line">      <span class="string">"text"</span>: <span class="string">"fav"</span></span><br><span class="line">    &#125;, &#123;</span><br><span class="line">      <span class="string">"pagePath"</span>: <span class="string">"page/component/about/about"</span>,</span><br><span class="line">      <span class="string">"iconPath"</span>: <span class="string">"image/icon_settings_default.png"</span>,</span><br><span class="line">      <span class="string">"selectedIconPath"</span>: <span class="string">"image/icon_settings_active.png"</span>,</span><br><span class="line">      <span class="string">"text"</span>: <span class="string">"Settings"</span></span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"networkTimeout"</span>: &#123;</span><br><span class="line">    <span class="string">"request"</span>: <span class="number">10000</span>,</span><br><span class="line">    <span class="string">"connectSocket"</span>: <span class="number">10000</span>,</span><br><span class="line">    <span class="string">"uploadFile"</span>: <span class="number">10000</span>,</span><br><span class="line">    <span class="string">"downloadFile"</span>: <span class="number">10000</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"debug"</span>: <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// app.wxss</span><br><span class="line">page &#123;</span><br><span class="line">  background-color: #fbf9fe;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// page/component/index/index.js</span></span><br><span class="line"><span class="keyword">var</span> jodeData,startX,startY,endX,endY,moveStart,</span><br><span class="line">    topAdImgs = [</span><br><span class="line">        <span class="string">'../../../image/ad/1.jpg'</span>,</span><br><span class="line">        <span class="string">'../../../image/ad/2.jpg'</span>,</span><br><span class="line">        <span class="string">'../../../image/ad/3.jpg'</span>,</span><br><span class="line">        <span class="string">'../../../image/ad/4.jpg'</span>,</span><br><span class="line">        <span class="string">'../../../image/ad/5.jpg'</span></span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    list: [],</span><br><span class="line">    itemToView: <span class="string">''</span>,</span><br><span class="line">    scrollTop: <span class="number">0</span>,</span><br><span class="line">    currentPage: <span class="number">1</span>,</span><br><span class="line">    bottomHidden: <span class="string">'none'</span>,</span><br><span class="line">    modalHidden: <span class="literal">true</span>,</span><br><span class="line">    modalText: <span class="string">''</span>,</span><br><span class="line">    topImages:topAdImgs,</span><br><span class="line">  &#125;,</span><br><span class="line">  colorMap: [<span class="string">'#86a3c1'</span>,<span class="string">'#86d1cc'</span>,<span class="string">'#bdd4e4'</span>,<span class="string">'#debf88'</span>,<span class="string">'#f9af02'</span>],</span><br><span class="line">  parse: <span class="function"><span class="keyword">function</span>(<span class="params">html</span>) </span>&#123;</span><br><span class="line">    html = html.replace(<span class="regexp">/(&lt;p&gt;)|(&lt;\/p&gt;)|(\t)|(&amp;nbsp;)/gm</span>, <span class="string">""</span>);</span><br><span class="line">    <span class="keyword">return</span> html;</span><br><span class="line">  &#125;,</span><br><span class="line">  prefixData: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> favJokes = wx.getStorageSync(<span class="string">'favJokes'</span>) || [];</span><br><span class="line">    data.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item,index</span>)</span>&#123;</span><br><span class="line">      item.ct = item.ct.substr(<span class="number">0</span>,<span class="number">19</span>);</span><br><span class="line">      <span class="keyword">if</span>(item.type === <span class="number">1</span>)&#123;</span><br><span class="line">        item.text = self.parse(item.text);  </span><br><span class="line">      &#125;</span><br><span class="line">      item.background = self.colorMap[index%<span class="number">5</span>];</span><br><span class="line">      item.right = <span class="string">'0%'</span>;</span><br><span class="line">      item.hidden = <span class="string">'block'</span>;</span><br><span class="line">      item.hasFav = <span class="string">'none'</span>;</span><br><span class="line">      favJokes.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">fitem,findex</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(fitem.id === item.id)&#123;</span><br><span class="line">          item.hasFav = <span class="string">'block'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">  &#125;,</span><br><span class="line">  onLoad: <span class="function"><span class="keyword">function</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      url: <span class="string">'https://123.test.com/joke_text?page='</span> + self.data.currentPage,</span><br><span class="line">      data: &#123;&#125;,</span><br><span class="line">      header: &#123;</span><br><span class="line">        <span class="string">'Content-Type'</span>: <span class="string">'application/json'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      success: <span class="function"><span class="keyword">function</span>(<span class="params">res</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> data = res.data;</span><br><span class="line">        data = self.prefixData(data);</span><br><span class="line">        self.setData(&#123;</span><br><span class="line">          bottomHidden: <span class="string">'none'</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span>(self.data.currentPage === <span class="number">1</span>)&#123;</span><br><span class="line">          self.setData(&#123;</span><br><span class="line">            list: data</span><br><span class="line">          &#125;);</span><br><span class="line">          self.toPos(self.data.currentPage);  </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          data = self.data.list.concat(data);</span><br><span class="line">          self.setData(&#123;</span><br><span class="line">            list: data</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      error: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        self.setData(&#123;</span><br><span class="line">          bottomHidden: <span class="string">'none'</span></span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  toPos: <span class="function"><span class="keyword">function</span>(<span class="params">page</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    setTimeout(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      self.setData(&#123;</span><br><span class="line">        itemToView: <span class="string">'item'</span> + (page-<span class="number">1</span>) * <span class="number">20</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  reDealData: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> allJodes = <span class="keyword">this</span>.data.list;</span><br><span class="line">    <span class="keyword">var</span> favJokes = wx.getStorageSync(<span class="string">'favJokes'</span>) || [];</span><br><span class="line">    allJodes.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item,index</span>)</span>&#123;</span><br><span class="line">      item.hasFav = <span class="string">'none'</span>;</span><br><span class="line">      favJokes.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">fitem,findex</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(fitem.id === item.id)&#123;</span><br><span class="line">          item.hasFav = <span class="string">'block'</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      list: allJodes</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  onShow: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.reDealData();</span><br><span class="line">  &#125;,</span><br><span class="line">  topUpdate: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      currentPage: <span class="number">1</span>,</span><br><span class="line">      itemToView: <span class="string">'top'</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">this</span>.onLoad();</span><br><span class="line">  &#125;,</span><br><span class="line">  bottomLoad: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> page = <span class="keyword">this</span>.data.currentPage;</span><br><span class="line">    page = page + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      bottomHidden: <span class="string">'block'</span>,</span><br><span class="line">      currentPage: page</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">this</span>.onLoad();</span><br><span class="line">  &#125;,</span><br><span class="line">  itemScroll: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  itemClick: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="comment">// wx.navigationTo(&#123;url:""&#125;);</span></span><br><span class="line">  &#125;,</span><br><span class="line">  itemStart: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> touch = event.touches[<span class="number">0</span>];</span><br><span class="line">    startX = touch.clientX;</span><br><span class="line">    startY = touch.clientY;</span><br><span class="line">    moveStart = <span class="literal">true</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  itemMove: <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">var</span> dataIndex = event.currentTarget.dataset.idx;</span><br><span class="line">    jodeData = <span class="keyword">this</span>.data.list;</span><br><span class="line">    <span class="keyword">if</span>(moveStart)&#123;</span><br><span class="line">      <span class="keyword">var</span> touch = event.touches[<span class="number">0</span>];</span><br><span class="line">      endX = touch.clientX;</span><br><span class="line">      endY = touch.clientY;</span><br><span class="line">      <span class="keyword">if</span>(<span class="built_in">Math</span>.abs(startX - endX) &gt;= <span class="built_in">Math</span>.abs(startY - endY))&#123;</span><br><span class="line">        <span class="keyword">if</span>(endX - startX &lt;= -<span class="number">5</span>)&#123;</span><br><span class="line">          jodeData.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item,index</span>)</span>&#123;</span><br><span class="line">            item.right = <span class="string">'0%'</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">          jodeData[dataIndex].right = <span class="string">"20%"</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">          jodeData.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item,index</span>)</span>&#123;</span><br><span class="line">            item.right = <span class="string">'0%'</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        self.setData(&#123;</span><br><span class="line">          list: jodeData</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    moveStart = <span class="literal">false</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  modalChange:<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      modalHidden: <span class="literal">true</span>,</span><br><span class="line">      modalText: <span class="string">''</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  tapFav:<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dataIndex = event.currentTarget.dataset.idx;</span><br><span class="line">    <span class="keyword">var</span> allJodes = <span class="keyword">this</span>.data.list;</span><br><span class="line">    <span class="keyword">var</span> curJokes = allJodes[dataIndex];</span><br><span class="line">    curJokes.right = <span class="string">'0%'</span>;</span><br><span class="line">    <span class="keyword">var</span> favJokes = wx.getStorageSync(<span class="string">'favJokes'</span>) || [];</span><br><span class="line">    <span class="keyword">if</span>(curJokes.hasFav !== <span class="string">'block'</span>)&#123;</span><br><span class="line">      curJokes.hasFav = <span class="string">'block'</span>;</span><br><span class="line">      favJokes.unshift(curJokes);</span><br><span class="line">      wx.setStorageSync(<span class="string">'favJokes'</span>, favJokes);</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        list: allJodes</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">        list: allJodes,</span><br><span class="line">        modalHidden: <span class="literal">false</span>,</span><br><span class="line">        modalText: <span class="string">'添加过了'</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  tapDel:<span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dataIndex = event.currentTarget.dataset.idx;</span><br><span class="line">    <span class="keyword">var</span> allJodes = <span class="keyword">this</span>.data.list;</span><br><span class="line">    <span class="keyword">var</span> curJokes = allJodes[dataIndex];</span><br><span class="line">    curJokes.right = <span class="string">'0%'</span>;</span><br><span class="line">    curJokes.hidden = <span class="string">'none'</span>;</span><br><span class="line">    <span class="keyword">this</span>.setData(&#123;</span><br><span class="line">      list: allJodes</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">// page/component/index/index.wxml</span><br><span class="line"><span class="tag">&lt;<span class="title">modal</span> <span class="attribute">class</span>=<span class="value">"modal"</span> <span class="attribute">hidden</span>=<span class="value">"&#123;&#123;modalHidden&#125;&#125;"</span> </span><br><span class="line">    <span class="attribute">no-cancel</span> <span class="attribute">bindconfirm</span>=<span class="value">"modalChange"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">view</span>&gt;</span> &#123;&#123;modalText&#125;&#125; <span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">modal</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">view</span> <span class="attribute">class</span>=<span class="value">"index"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">view</span> <span class="attribute">class</span>=<span class="value">"body"</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">swiper</span> <span class="attribute">class</span>=<span class="value">"top-swiper"</span> <span class="attribute">indicator-dots</span>=<span class="value">"true"</span></span><br><span class="line">		  <span class="attribute">autoplay</span>=<span class="value">"true"</span> <span class="attribute">interval</span>=<span class="value">"5000"</span> <span class="attribute">duration</span>=<span class="value">"1000"</span>&gt;</span></span><br><span class="line">		  <span class="tag">&lt;<span class="title">block</span> <span class="attribute">wx:for</span>=<span class="value">"&#123;&#123;topImages&#125;&#125;"</span>&gt;</span></span><br><span class="line">		    <span class="tag">&lt;<span class="title">swiper-item</span>&gt;</span></span><br><span class="line">		      <span class="tag">&lt;<span class="title">image</span> <span class="attribute">src</span>=<span class="value">"&#123;&#123;item&#125;&#125;"</span> <span class="attribute">class</span>=<span class="value">"slide-image"</span>/&gt;</span></span><br><span class="line">		    <span class="tag">&lt;/<span class="title">swiper-item</span>&gt;</span></span><br><span class="line">		  <span class="tag">&lt;/<span class="title">block</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="title">swiper</span>&gt;</span></span><br><span class="line">    	<span class="tag">&lt;<span class="title">scroll-view</span> <span class="attribute">class</span>=<span class="value">"scroll-view"</span> </span><br><span class="line">    	    <span class="attribute">scroll-y</span>=<span class="value">"true"</span> <span class="attribute">bindscrolltoupper</span>=<span class="value">"topUpdate"</span></span><br><span class="line">    	    <span class="attribute">bindscrolltolower</span>=<span class="value">"bottomLoad"</span> <span class="attribute">bindscroll</span>=<span class="value">"itemScroll"</span> </span><br><span class="line">    	    <span class="attribute">scroll-into-view</span>=<span class="value">"&#123;&#123;itemToView&#125;&#125;"</span> </span><br><span class="line">    	    <span class="attribute">scroll-top</span>=<span class="value">"&#123;&#123;scrollTop&#125;&#125;"</span> </span><br><span class="line">    	    <span class="attribute">upper-threshold</span>=<span class="value">"20"</span> </span><br><span class="line">    	    <span class="attribute">lower-threshold</span>=<span class="value">"30"</span>&gt;</span></span><br><span class="line">	    	<span class="tag">&lt;<span class="title">view</span> <span class="attribute">class</span>=<span class="value">"list-container"</span>&gt;</span></span><br><span class="line">	    		<span class="tag">&lt;<span class="title">view</span> <span class="attribute">id</span>=<span class="value">"top"</span> <span class="attribute">class</span>=<span class="value">"pull-update"</span>&gt;</span></span><br><span class="line">	    			正在更新</span><br><span class="line">            <span class="tag">&lt;<span class="title">image</span> <span class="attribute">style</span>=<span class="value">"width: 30rpx; height: 30rpx;margin-left:10rpx;"</span> </span><br><span class="line">		            <span class="attribute">mode</span>=<span class="value">"scaleToFill"</span> <span class="attribute">src</span>=<span class="value">"../../../image/loading.gif"</span>&gt;</span><span class="tag">&lt;/<span class="title">image</span>&gt;</span></span><br><span class="line">	    		<span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line">		    	<span class="tag">&lt;<span class="title">block</span> <span class="attribute">wx:for</span>=<span class="value">"&#123;&#123;list&#125;&#125;"</span>&gt;</span></span><br><span class="line">		        <span class="tag">&lt;<span class="title">view</span> <span class="attribute">id</span>=<span class="value">"item&#123;&#123;index&#125;&#125;"</span> <span class="attribute">data-idx</span>=<span class="value">"&#123;&#123;index&#125;&#125;"</span> <span class="attribute">class</span>=<span class="value">"item"</span></span><br><span class="line">		            <span class="attribute">style</span>=<span class="value">"background:&#123;&#123;item.background&#125;&#125;;right:&#123;&#123;item.right&#125;&#125;;display:&#123;&#123;item.hidden&#125;&#125;;"</span> </span><br><span class="line">		            <span class="attribute">bindtap</span>=<span class="value">"itemClick"</span> <span class="attribute">bindtouchstart</span>=<span class="value">"itemStart"</span> <span class="attribute">bindtouchmove</span>=<span class="value">"itemMove"</span>&gt;</span></span><br><span class="line">		        	<span class="tag">&lt;<span class="title">view</span> <span class="attribute">class</span>=<span class="value">"info-container"</span>&gt;</span></span><br><span class="line">			          <span class="tag">&lt;<span class="title">view</span> <span class="attribute">class</span>=<span class="value">"date"</span>&gt;</span></span><br><span class="line">			          	&#123;&#123;item.ct&#125;&#125;</span><br><span class="line">			          <span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line">  			        <span class="tag">&lt;<span class="title">block</span> <span class="attribute">wx:if</span>=<span class="value">"&#123;&#123;item.type == 1&#125;&#125;"</span>&gt;</span></span><br><span class="line">  						    <span class="tag">&lt;<span class="title">view</span> <span class="attribute">class</span>=<span class="value">"content"</span>&gt;</span></span><br><span class="line">  			          	&#123;&#123;item.text&#125;&#125;</span><br><span class="line">  			          <span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line">  					    <span class="tag">&lt;/<span class="title">block</span>&gt;</span></span><br><span class="line">  					    <span class="tag">&lt;<span class="title">block</span> <span class="attribute">wx:else</span>&gt;</span></span><br><span class="line">  					  	  <span class="tag">&lt;<span class="title">view</span> <span class="attribute">class</span>=<span class="value">"content"</span>&gt;</span></span><br><span class="line">  				          	<span class="tag">&lt;<span class="title">image</span> <span class="attribute">class</span>=<span class="value">"img-info"</span> <span class="attribute">mode</span>=<span class="value">"aspectFit"</span> </span><br><span class="line">  				          	    <span class="attribute">src</span>=<span class="value">"&#123;&#123;item.img&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="title">image</span>&gt;</span></span><br><span class="line">  				          <span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line">  				          <span class="tag">&lt;<span class="title">view</span> <span class="attribute">class</span>=<span class="value">"title"</span>&gt;</span></span><br><span class="line">  				          	&#123;&#123;item.title&#125;&#125;</span><br><span class="line">  				          <span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line">  					    <span class="tag">&lt;/<span class="title">block</span>&gt;</span></span><br><span class="line">  			      <span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line">		          <span class="tag">&lt;<span class="title">image</span> <span class="attribute">class</span>=<span class="value">"fav-icon"</span> <span class="attribute">mode</span>=<span class="value">"scaleToFill"</span> </span><br><span class="line">		            <span class="attribute">src</span>=<span class="value">"../../../image/fav.png"</span> <span class="attribute">style</span>=<span class="value">"display:&#123;&#123;item.hasFav&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="title">image</span>&gt;</span></span><br><span class="line">        	    <span class="tag">&lt;<span class="title">view</span> <span class="attribute">class</span>=<span class="value">"opt-item opt-fav"</span> <span class="attribute">catchtap</span>=<span class="value">"tapFav"</span> <span class="attribute">data-idx</span>=<span class="value">"&#123;&#123;index&#125;&#125;"</span>&gt;</span>喜欢<span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line">        	    <span class="tag">&lt;<span class="title">view</span> <span class="attribute">class</span>=<span class="value">"opt-item opt-del"</span> <span class="attribute">catchtap</span>=<span class="value">"tapDel"</span> <span class="attribute">data-idx</span>=<span class="value">"&#123;&#123;index&#125;&#125;"</span>&gt;</span>删除<span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line">		        <span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;/<span class="title">block</span>&gt;</span></span><br><span class="line">			    <span class="tag">&lt;<span class="title">view</span> <span class="attribute">id</span>=<span class="value">"bottom"</span> <span class="attribute">class</span>=<span class="value">"pull-load"</span> <span class="attribute">style</span>=<span class="value">"display:&#123;&#123;bottomHidden&#125;&#125;;"</span>&gt;</span></span><br><span class="line">	    			正在加载</span><br><span class="line">            <span class="tag">&lt;<span class="title">image</span> <span class="attribute">style</span>=<span class="value">"width: 30rpx; height: 30rpx;margin-left:10rpx;"</span></span><br><span class="line">	    			            <span class="attribute">mode</span>=<span class="value">"scaleToFill"</span> <span class="attribute">src</span>=<span class="value">"../../../image/loading.gif"</span>&gt;</span><span class="tag">&lt;/<span class="title">image</span>&gt;</span></span><br><span class="line">	    		<span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line">			  <span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line">	    <span class="tag">&lt;/<span class="title">scroll-view</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// page/component/index/index.wxss</span></span><br><span class="line">@<span class="keyword">import</span> <span class="string">'../../common/wxss/base.wxss'</span>;</span><br><span class="line">@<span class="keyword">import</span> <span class="string">'../../common/wxss/common.wxss'</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// page/common/wxss/base.wxss</span><br><span class="line">.index&#123;</span><br><span class="line">    background-color: #FBF9FE;</span><br><span class="line">    font-family: -apple-system-font,Helvetica Neue,Helvetica,sans-serif;</span><br><span class="line">    flex: 1;</span><br><span class="line">    min-height: 100%;</span><br><span class="line">    font-size: 32rpx;</span><br><span class="line">&#125;</span><br><span class="line">.body&#123;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">// page/common/wxss/common.wxss</span><br><span class="line">.top-swiper&#123;</span><br><span class="line">    height: 300rpx;</span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.slide-image&#123;</span><br><span class="line">    height: 300rpx;</span><br><span class="line">    width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.scroll-view&#123;</span><br><span class="line">    height: 860rpx;</span><br><span class="line">&#125;</span><br><span class="line">.pic-view&#123;</span><br><span class="line">    height: 1160rpx;</span><br><span class="line">&#125;</span><br><span class="line">.list-container&#123;</span><br><span class="line">    margin: 40rpx 0;</span><br><span class="line">&#125;</span><br><span class="line">.pull-update&#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">    height: 40rpx;</span><br><span class="line">    line-height: 40rpx;</span><br><span class="line">    margin-top: -40rpx;</span><br><span class="line">&#125;</span><br><span class="line">.pull-load&#123;</span><br><span class="line">    text-align: center;</span><br><span class="line">    height: 40rpx;</span><br><span class="line">    line-height: 40rpx;</span><br><span class="line">&#125;</span><br><span class="line">.item&#123;</span><br><span class="line">    position: relative;</span><br><span class="line">    display: block;</span><br><span class="line">    width: 100%;</span><br><span class="line">  text-align: left;</span><br><span class="line">  vertical-align: middle;</span><br><span class="line">  background-color: #fff;</span><br><span class="line">    border-radius: 3;</span><br><span class="line">    border: 0 none;</span><br><span class="line">    margin: 0;</span><br><span class="line">    min-height: 200rpx;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    transition: all .25s ease;</span><br><span class="line">    -webkit-transition: all .25s ease;</span><br><span class="line">&#125;</span><br><span class="line">.opt-item&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    height: 100%;</span><br><span class="line">    width: 10%;</span><br><span class="line">    box-sizing: border-box;</span><br><span class="line">    padding-left: 20rpx;</span><br><span class="line">    min-height: 200rpx;</span><br><span class="line">    writing-mode: vertical-lr;</span><br><span class="line">    text-align: center;</span><br><span class="line">    vertical-align: middle;</span><br><span class="line">    display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line">.opt-fav&#123;</span><br><span class="line">    color: #fff;</span><br><span class="line">    right: -10%;</span><br><span class="line">    background: #868484;</span><br><span class="line">&#125;</span><br><span class="line">.opt-del&#123;</span><br><span class="line">    color: #fff;</span><br><span class="line">    right: -20%;</span><br><span class="line">    background: #dc4545;</span><br><span class="line">&#125;</span><br><span class="line">.fav-del&#123;</span><br><span class="line">    color: #fff;</span><br><span class="line">    right: -10%;</span><br><span class="line">    background: #dc4545;</span><br><span class="line">&#125;</span><br><span class="line">.info-container&#123;</span><br><span class="line">    padding: 0 10rpx;</span><br><span class="line">&#125;</span><br><span class="line">.date&#123;</span><br><span class="line">    color: #fff;</span><br><span class="line">    text-align: left;</span><br><span class="line">    padding:18rpx 8rpx 8rpx 8rpx;</span><br><span class="line">&#125;</span><br><span class="line">.title&#123;</span><br><span class="line">    font-size: 28rpx;</span><br><span class="line">    color: #fff;</span><br><span class="line">    text-align: left;</span><br><span class="line">    padding:8rpx 8rpx 18rpx 8rpx;</span><br><span class="line">    color: #333;</span><br><span class="line">&#125;</span><br><span class="line">.content&#123;</span><br><span class="line">    font-size: 28rpx;</span><br><span class="line">    text-align: left;</span><br><span class="line">    padding:8rpx 8rpx 18rpx 8rpx;</span><br><span class="line">    color: #333;</span><br><span class="line">&#125;</span><br><span class="line">.blank-icon&#123;</span><br><span class="line">    margin: 0 auto;</span><br><span class="line">&#125;</span><br><span class="line">.fav-icon&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    right: 0;</span><br><span class="line">    top: 0;</span><br><span class="line">    width: 60rpx;</span><br><span class="line">    height: 60rpx;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="简单理解">简单理解</h5><ul>
<li>小程序开发起来难度适中，主要是对框架，API以及组建的了解，开发过程中简单的拼凑，加上自己逻辑的串联，就可以完成一个小应用</li>
<li>对于前端开发来说，成本是非常低的，css，js语法一样，然后就是html，html就相当于我们使用一个新的模版引擎，更加强大的mustache</li>
<li>更像是hybrid开发，我们有调起原生的功能的能力，而又不需要去注册一堆方法(和app约定的方法),例如相册，定位，罗盘，网络，系统信息等</li>
<li>我们不用过多考虑路由的问题，兼容的问题</li>
<li>网络请求没有跨域产生的问题</li>
<li>解决了跨平台，多设备下的交互一致性</li>
</ul>
<h5 id="资料大全">资料大全</h5><p><a href="https://github.com/justjavac/awesome-wechat-weapp?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io" target="_blank" rel="external">https://github.com/justjavac/awesome-wechat-weapp?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h5 id="准备">准备</h5><ul>
<li>开发环境<ul>
<li>下载开发工具 (<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/download.html">https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/download.html</a>)</li>
<li>按照网上教程破解 (<a href="https://github.com/gavinkwoe/weapp-ide-crack">https://github.com/gavinkwoe/weapp-ide-crack</a>)</li>
<li>或者直接下载破解好的包</li>
</ul>
</li>
<li>学习资料<ul>
<li><a href="https://mp.weixin.qq.com/debug/wxadoc/dev/">https://mp.weixin.qq.com/debug/wxadoc/dev/</a></li>
</ul>
</li>
</ul>]]>
    
    </summary>
    
      <category term="web" scheme="http://www.xuerlove.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[nodejs利用session做登录控制]]></title>
    <link href="http://www.xuerlove.com/2016/11/02/nodejs%E5%88%A9%E7%94%A8session%E5%81%9A%E7%99%BB%E5%BD%95%E6%8E%A7%E5%88%B6/"/>
    <id>http://www.xuerlove.com/2016/11/02/nodejs利用session做登录控制/</id>
    <published>2016-11-02T12:53:28.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="background">background</h4><p>&nbsp; &nbsp;&nbsp;&nbsp;登录的场景在我们日常应用中有很多，登录的实现过程大家都很清楚，无非就是拿着用户名密去数据库中查询，如果查到了就表示这个人是系统用户，可以登录并且使用系统。那么当用户访问系统页面的时候，我们怎么判断他是不是登录过了呢，这个时候就引出了session。<br>&nbsp; &nbsp;&nbsp;&nbsp;session翻译成会话，session的生命周期和浏览器的生命周期一致，session从创建的一刻起开始生效，浏览器关闭session销毁。session是客户端与服务器之间保持状态的解决方案。这种会话的匹配是通过cookie来实现的。</p>
<a id="more"></a>
<h4 id="express-session">express-session</h4><p>&nbsp; &nbsp;&nbsp;&nbsp;express-session是基于express框架的专门处理session的中间件，安装 <code>sudo npm install express-session --save</code> , session的解析过程需要用到cookieParser, 安装 <code>sudo npm install cookieParser --save</code> , 我们在使用的时候，只需要把express-session加入到中间件中，这样所有的路由就都能使用它了，我们可以在req.session中设置和读取session的值。</p>
<h5 id="应用">应用</h5><p>改造上一节中的例子，这里只介绍一些增加项<br>app.js (引用session，加入中间件)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">var</span> session = <span class="built_in">require</span>(<span class="string">'express-session'</span>);</span><br><span class="line"><span class="keyword">var</span> cookieParser = <span class="built_in">require</span>(<span class="string">'cookie-parser'</span>);</span><br><span class="line">...</span><br><span class="line">...</span><br><span class="line">app.use(cookieParser());</span><br><span class="line">app.use(session(&#123;</span><br><span class="line">  resave: <span class="literal">false</span>,</span><br><span class="line">  saveUninitialized: <span class="literal">true</span>,</span><br><span class="line">  name: <span class="string">'user'</span>,</span><br><span class="line">  cookie: &#123; maxAge: <span class="number">80000</span> &#125;,</span><br><span class="line">  secret: <span class="string">'wz'</span></span><br><span class="line">&#125;));</span><br><span class="line">...</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>routes/index.js (路由中检查登录session是否存在)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">restrict</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (req.session.user) &#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    res.redirect(<span class="string">'/login.page'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">router.get(<span class="string">'/index.page'</span>,restrict, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  res.send(<span class="string">'success'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">router.get(<span class="string">'/login.page'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  res.send(<span class="string">'login'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">router.get(<span class="string">'/login'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>)</span>&#123;</span><br><span class="line">    login(req, res, next);</span><br><span class="line">&#125;);</span><br><span class="line">router.get(<span class="string">'/logout'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  req.session.destroy(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    res.redirect(<span class="string">'/login.page'</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>main/login.js (只增加了注释部分的代码)<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">queryData</span>(<span class="params">req, res, next,query</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> query = query ? <span class="built_in">JSON</span>.parse(query) : &#123;&#125;;</span><br><span class="line">    pageModule.find(query).exec(<span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">            <span class="string">"Content-Type"</span>: <span class="string">"application/json;charset=UTF-8"</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            result = <span class="built_in">JSON</span>.stringify(dbError);</span><br><span class="line">            res.end(result);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(data &amp;&amp; data.length)&#123;</span><br><span class="line">            <span class="comment">//只增加了登录成功后，创建一个session的过程</span></span><br><span class="line">            req.session.user = data[<span class="number">0</span>].username;</span><br><span class="line">            dbSuccess.data = data;</span><br><span class="line">            result = <span class="built_in">JSON</span>.stringify(dbSuccess);</span><br><span class="line">            res.end(result);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            result = <span class="built_in">JSON</span>.stringify(dbError);</span><br><span class="line">            res.end(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="测试过程">测试过程</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span> http:<span class="comment">//127.0.0.1:3000/index.page</span></span><br><span class="line"><span class="number">2.</span> http:<span class="comment">//127.0.0.1:3000/login?type=find</span></span><br><span class="line"><span class="number">3.</span> http:<span class="comment">//127.0.0.1:3000/index.page</span></span><br></pre></td></tr></table></figure>
<p>分别输入三个url，观察现象，第一个url输入的时候，因为不存在session,所以会跳转到登录页面，<br>第二个url为模拟登录过程，创建了一个session，第三个url访问主页，此时存在session,所以可以看到首页内容。</p>
<h4 id="express-session常用参数">express-session常用参数</h4><ul>
<li>cookie Object类型，设置cookie的一些属性</li>
<li>domain cookie作用域</li>
<li>expires cookie失效时间</li>
<li>httpOnly 禁止客户端访问</li>
<li>maxAge 实效时长</li>
<li>path cookie路径</li>
<li>name 这是session id的值</li>
<li>resave 允许重新设置session</li>
<li>saveUninitialized 是否session可以修改</li>
<li>secret cookie密钥</li>
<li>store session存储方式 mongodb等</li>
</ul>
<h4 id="express-session常用方法">express-session常用方法</h4><ul>
<li>Session.regenerate() 创建session</li>
<li>Session.destroy() 销毁session</li>
<li>Session.reload() 重载session</li>
<li>Session.save() 保存session</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="background">background</h4><p>&nbsp; &nbsp;&nbsp;&nbsp;登录的场景在我们日常应用中有很多，登录的实现过程大家都很清楚，无非就是拿着用户名密去数据库中查询，如果查到了就表示这个人是系统用户，可以登录并且使用系统。那么当用户访问系统页面的时候，我们怎么判断他是不是登录过了呢，这个时候就引出了session。<br>&nbsp; &nbsp;&nbsp;&nbsp;session翻译成会话，session的生命周期和浏览器的生命周期一致，session从创建的一刻起开始生效，浏览器关闭session销毁。session是客户端与服务器之间保持状态的解决方案。这种会话的匹配是通过cookie来实现的。</p>]]>
    
    </summary>
    
      <category term="nodejs" scheme="http://www.xuerlove.com/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[nodejs+mongodb]]></title>
    <link href="http://www.xuerlove.com/2016/10/31/nodejs-mongodb/"/>
    <id>http://www.xuerlove.com/2016/10/31/nodejs-mongodb/</id>
    <published>2016-10-31T12:53:27.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<p>这篇文章中，我们使用nodejs搭建简易服务器，然后开发一个登录过程中使用的增删改查接口，数据库使用mongoDB,操作数据库模块选用mongoose。</p>
<h4 id="创建nodejs工程">创建nodejs工程</h4><blockquote>
<p>npm init<br>创建package.json文件</p>
</blockquote>
<a id="more"></a>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "<span class="attribute">name</span>": <span class="value"><span class="string">"nodeblog"</span></span>,</span><br><span class="line">  "<span class="attribute">version</span>": <span class="value"><span class="string">"1.0.0"</span></span>,</span><br><span class="line">  "<span class="attribute">description</span>": <span class="value"><span class="string">""</span></span>,</span><br><span class="line">  "<span class="attribute">main</span>": <span class="value"><span class="string">"index.js"</span></span>,</span><br><span class="line">  "<span class="attribute">scripts</span>": <span class="value">&#123;</span><br><span class="line">    "<span class="attribute">test</span>": <span class="value"><span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">  </span>&#125;</span>,</span><br><span class="line">  "<span class="attribute">author</span>": <span class="value"><span class="string">""</span></span>,</span><br><span class="line">  "<span class="attribute">license</span>": <span class="value"><span class="string">"ISC"</span></span>,</span><br><span class="line">  "<span class="attribute">dependencies</span>": <span class="value">&#123;</span><br><span class="line">    "<span class="attribute">express</span>": <span class="value"><span class="string">"^4.14.0"</span></span>,</span><br><span class="line">    "<span class="attribute">mongoose</span>": <span class="value"><span class="string">"^4.6.5"</span></span>,</span><br><span class="line">    "<span class="attribute">url</span>": <span class="value"><span class="string">"^0.11.0"</span></span><br><span class="line">  </span>&#125;</span><br><span class="line"></span>&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>dependencies中显示的是安装的依赖包，下面有安装过程，先不用考虑</p>
</blockquote>
<h4 id="使用express">使用express</h4><blockquote>
<p>sudo npm install express –save<br>快速构建web应用模块 资料: <a href="http://www.expressjs.com.cn/4x/api.html" target="_blank" rel="external">http://www.expressjs.com.cn/4x/api.html</a></p>
</blockquote>
<h4 id="app-js">app.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line">app.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;</span><br><span class="line">  res.send(<span class="string">'hello world'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'nodejs server start, listen port 3000'</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>浏览器打开 <a href="http://127.0.0.1:3000/" target="_blank" rel="external">http://127.0.0.1:3000/</a> 页面显示 hello world</p>
</blockquote>
<h4 id="使用mongoose">使用mongoose</h4><blockquote>
<p>sudo npm install mongoose –save<br>数据库操作模块</p>
</blockquote>
<h4 id="安装其他模块">安装其他模块</h4><blockquote>
<p>sudo npm install url –save<br>辅助解析url参数</p>
</blockquote>
<h4 id="nodejs操作数据库">nodejs操作数据库</h4><blockquote>
<p>app.js 程序主文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> routes = <span class="built_in">require</span>(<span class="string">'./routes/index'</span>);</span><br><span class="line">app.use(<span class="string">'/'</span>, routes);</span><br><span class="line">app.listen(<span class="number">3000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'nodejs server start, listen port 3000'</span>);</span><br></pre></td></tr></table></figure></p>
<p>routes/index.js 路由文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"><span class="keyword">var</span> login = <span class="built_in">require</span>(<span class="string">'../main/login'</span>);</span><br><span class="line">router.get([<span class="string">'/login'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    login(req, res, next);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure></p>
<p>main/config.js 数据库配置文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line">	dbHost: <span class="string">'127.0.0.1'</span>,</span><br><span class="line">	dbPort: <span class="string">'27017'</span>,</span><br><span class="line">	dbAdmin: <span class="string">'superuser'</span>,</span><br><span class="line">	dbPassword: <span class="string">'pwd'</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">module</span>.exports = config;</span><br></pre></td></tr></table></figure></p>
<p>main/loginSchema.js 数据库表结构<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>);</span><br><span class="line"><span class="keyword">var</span> loginSchema = <span class="keyword">new</span> mongoose.Schema(&#123;</span><br><span class="line">	username: <span class="built_in">String</span>,</span><br><span class="line">	userpassword: <span class="built_in">String</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">module</span>.exports = loginSchema;</span><br></pre></td></tr></table></figure></p>
<p>main/login.js 登录增删改查逻辑文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> url = <span class="built_in">require</span>(<span class="string">'url'</span>),</span><br><span class="line">    mongoose = <span class="built_in">require</span>(<span class="string">'mongoose'</span>),</span><br><span class="line">    loginSchema = <span class="built_in">require</span>(<span class="string">'./loginSchema'</span>),</span><br><span class="line">    config = <span class="built_in">require</span>(<span class="string">'./config'</span>);</span><br><span class="line"><span class="keyword">var</span> opt = &#123;</span><br><span class="line">        user: config.dbAdmin,</span><br><span class="line">        pass: config.dbPassword,</span><br><span class="line">        auth: &#123;</span><br><span class="line">            authdb: <span class="string">'admin'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    db = mongoose.createConnection(config.dbHost, <span class="string">'userinfo'</span>, config.dbPort, opt),</span><br><span class="line">    pageModule = db.model(<span class="string">"user"</span>, loginSchema);</span><br><span class="line"><span class="keyword">var</span> result,</span><br><span class="line">    dbSuccess = &#123;</span><br><span class="line">    	ret:<span class="literal">true</span>,</span><br><span class="line">    	data:&#123;&#125;</span><br><span class="line">    &#125;, </span><br><span class="line">    dbError = &#123;</span><br><span class="line">    	ret:<span class="literal">false</span>,</span><br><span class="line">    	data:<span class="string">'fail'</span></span><br><span class="line">    &#125;;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  存储数据</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">saveData</span>(<span class="params">req, res, next, pageData</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> pageDataModule = <span class="keyword">new</span> pageModule(<span class="built_in">JSON</span>.parse(pageData));</span><br><span class="line">    pageDataModule.save(<span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</span><br><span class="line">        res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">            <span class="string">"Content-Type"</span>: <span class="string">"application/json;charset=UTF-8"</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            result = <span class="built_in">JSON</span>.stringify(dbError);</span><br><span class="line">            res.end(result);</span><br><span class="line">        &#125;</span><br><span class="line">        dbSuccess.data = <span class="string">'操作成功'</span>;</span><br><span class="line">        result = <span class="built_in">JSON</span>.stringify(dbSuccess);</span><br><span class="line">        res.end(result);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  删除数据</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deleteData</span>(<span class="params">req, res, next,query</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> query = query ? <span class="built_in">JSON</span>.parse(query) : &#123;&#125;;</span><br><span class="line">    pageModule.remove(query).exec(<span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">            <span class="string">"Content-Type"</span>: <span class="string">"application/json;charset=UTF-8"</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            result = <span class="built_in">JSON</span>.stringify(dbError);</span><br><span class="line">            res.end(result);</span><br><span class="line">        &#125;</span><br><span class="line">        dbSuccess.data = <span class="string">'操作成功'</span>;</span><br><span class="line">        result = <span class="built_in">JSON</span>.stringify(dbSuccess);</span><br><span class="line">        res.end(result);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  更新数据</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateData</span>(<span class="params">req, res, next,query, pageData</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> query = query ? <span class="built_in">JSON</span>.parse(query) : &#123;&#125;;</span><br><span class="line">    pageData = <span class="built_in">JSON</span>.parse(pageData);</span><br><span class="line">    pageModule.findOneAndUpdate(query, pageData).exec(<span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">            <span class="string">"Content-Type"</span>: <span class="string">"application/json;charset=UTF-8"</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            result = <span class="built_in">JSON</span>.stringify(dbError);</span><br><span class="line">            res.end(result);</span><br><span class="line">        &#125;</span><br><span class="line">        dbSuccess.data = <span class="string">'操作成功'</span>;</span><br><span class="line">        result = <span class="built_in">JSON</span>.stringify(dbSuccess);</span><br><span class="line">        res.end(result);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  查询数据</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">queryData</span>(<span class="params">req, res, next,query</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> query = query ? <span class="built_in">JSON</span>.parse(query) : &#123;&#125;;</span><br><span class="line">    pageModule.find(query).exec(<span class="function"><span class="keyword">function</span>(<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">        res.writeHead(<span class="number">200</span>, &#123;</span><br><span class="line">            <span class="string">"Content-Type"</span>: <span class="string">"application/json;charset=UTF-8"</span></span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span>(err)&#123;</span><br><span class="line">            result = <span class="built_in">JSON</span>.stringify(dbError);</span><br><span class="line">            res.end(result);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(data &amp;&amp; data.length)&#123;</span><br><span class="line">            dbSuccess.data = data;</span><br><span class="line">            result = <span class="built_in">JSON</span>.stringify(dbSuccess);</span><br><span class="line">            res.end(result);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            result = <span class="built_in">JSON</span>.stringify(dbError);</span><br><span class="line">            res.end(result);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span><br><span class="line"> *  增删改查入口</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">login</span>(<span class="params">req, res, next</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> queryObj = url.parse(<span class="built_in">decodeURIComponent</span>(req.url), <span class="literal">true</span>).query,</span><br><span class="line">	    type = queryObj.type,</span><br><span class="line">	    query = queryObj.query,</span><br><span class="line">	    pageData = queryObj.pageData;</span><br><span class="line">	<span class="keyword">switch</span>(type)&#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'add'</span>:</span><br><span class="line">			saveData(req, res, next,pageData);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'delete'</span>:</span><br><span class="line">			deleteData(req, res, next,query);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'update'</span>:</span><br><span class="line">			updateData(req, res, next,query, pageData)</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">'find'</span>:</span><br><span class="line">			queryData(req, res, next,query)</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = login;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="测试url">测试url</h4><p>1.<a href="http://127.0.0.1:3000/login?type=add&amp;pageData={&quot;username&quot;:&quot;wz&quot;,&quot;userpassword&quot;:&quot;wz&quot;}" target="_blank" rel="external">http://127.0.0.1:3000/login?type=add&amp;pageData={&quot;username&quot;:&quot;wz&quot;,&quot;userpassword&quot;:&quot;wz&quot;}</a><br>2.<a href="http://127.0.0.1:3000/login?type=find" target="_blank" rel="external">http://127.0.0.1:3000/login?type=find</a><br>3.<a href="http://127.0.0.1:3000/login?type=update&amp;query={&quot;username&quot;:&quot;wz&quot;}&amp;pageData={&quot;username&quot;:&quot;ww&quot;,&quot;userpassword&quot;:&quot;wz&quot;}" target="_blank" rel="external">http://127.0.0.1:3000/login?type=update&amp;query={&quot;username&quot;:&quot;wz&quot;}&amp;pageData={&quot;username&quot;:&quot;ww&quot;,&quot;userpassword&quot;:&quot;wz&quot;}</a><br>4.<a href="http://127.0.0.1:3000/login?type=delete&amp;query={&quot;username&quot;:&quot;ww&quot;}" target="_blank" rel="external">http://127.0.0.1:3000/login?type=delete&amp;query={&quot;username&quot;:&quot;ww&quot;}</a></p>
<blockquote>
<p>提供的测试url分别做了：1 向数据库中插入一条数据，2 在数据库中查找users表中所有数据，3 修改第一步中添加的数据，4 删除第三步中修改的数据。都以json格式返回给客户端。</p>
</blockquote>
]]></content>
    <summary type="html">
    <![CDATA[<p>这篇文章中，我们使用nodejs搭建简易服务器，然后开发一个登录过程中使用的增删改查接口，数据库使用mongoDB,操作数据库模块选用mongoose。</p>
<h4 id="创建nodejs工程">创建nodejs工程</h4><blockquote>
<p>npm init<br>创建package.json文件</p>
</blockquote>]]>
    
    </summary>
    
      <category term="nodejs" scheme="http://www.xuerlove.com/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[mongodb]]></title>
    <link href="http://www.xuerlove.com/2016/10/31/mongodb/"/>
    <id>http://www.xuerlove.com/2016/10/31/mongodb/</id>
    <published>2016-10-31T11:57:13.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="环境">环境</h4><ul>
<li>centeros</li>
</ul>
<h4 id="下载">下载</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.2.10.tgz</span></span><br></pre></td></tr></table></figure>
<h4 id="解压">解压</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxvf mongodb-linux-x86_64-<span class="number">3.2</span><span class="number">.10</span>.tgz</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="加入PATH">加入PATH</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd mongodb-linux-x86_64-<span class="number">3.2</span><span class="number">.10</span></span><br><span class="line"><span class="keyword">export</span> PATH=<span class="regexp">/home/</span>q/mongodb-linux-x86_64-<span class="number">3.2</span><span class="number">.10</span>/bin:$PATH</span><br></pre></td></tr></table></figure>
<h4 id="创建基础文件">创建基础文件</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p data/db</span><br><span class="line">sudo mkdir logs</span><br><span class="line">sudo vim ./bin/mongodb.conf</span><br><span class="line"></span><br><span class="line">#加入内容</span><br><span class="line">port=27017</span><br><span class="line">dbpath=/home/q/mongodb-linux-x86_64-3.2.10/data/db</span><br><span class="line">logpath=/home/q/mongodb-linux-x86_64-3.2.10/logs/db.logs</span><br><span class="line">logappend=true</span><br></pre></td></tr></table></figure>
<h4 id="启动服务">启动服务</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo mongod -config /home/q/mongodb-linux-x86_64-<span class="number">3.2</span><span class="number">.10</span>/bin/mongodb.conf  --fork --auth</span><br></pre></td></tr></table></figure>
<h4 id="连接数据库">连接数据库</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongo</span><br></pre></td></tr></table></figure>
<h4 id="添加用户">添加用户</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">use admin</span><br><span class="line">db.createUser(</span><br><span class="line">  &#123;</span><br><span class="line">    user:<span class="string">"superuser"</span>,</span><br><span class="line">    pwd:<span class="string">"pwd"</span>,</span><br><span class="line">    roles:[<span class="string">"root"</span>]</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="认证">认证</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">use admin</span><br><span class="line">db.auth(<span class="string">'superuser'</span>,<span class="string">'pwd'</span>)</span><br></pre></td></tr></table></figure>
<h4 id="添加用户-1">添加用户</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db.createUser(</span><br><span class="line">   &#123;</span><br><span class="line">     user: <span class="string">"zhuo.wu"</span>,</span><br><span class="line">     pwd: <span class="string">"zhuo.wu"</span>,</span><br><span class="line">     roles: [ <span class="string">"readWrite"</span>, <span class="string">"dbAdmin"</span> ]</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h4 id="查看用户">查看用户</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show users</span><br></pre></td></tr></table></figure>
<h4 id="创建数据库">创建数据库</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use testDB</span><br></pre></td></tr></table></figure>
<h4 id="创建集合">创建集合</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.test.insert(&#123;<span class="string">'k'</span>:<span class="string">'123'</span>&#125;)</span><br><span class="line">show dbs</span><br><span class="line">db.test.find()</span><br></pre></td></tr></table></figure>
<h4 id="删除集合">删除集合</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.test.drop()</span><br></pre></td></tr></table></figure>
<h4 id="删除数据库">删除数据库</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.dropDatabase()</span><br></pre></td></tr></table></figure>
<h4 id="数据库备份">数据库备份</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mongodump -u=superuser -p=pwd</span><br><span class="line">#mongodump -h dbhost -d dbname -o dbdirectory</span><br></pre></td></tr></table></figure>
<h4 id="数据库恢复">数据库恢复</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mongodump -u=superuser -p=pwd</span><br><span class="line">#mongorestore -h dbhost -d dbname --directoryperdb dbdirectory</span><br></pre></td></tr></table></figure>
<h4 id="定时备份数据库">定时备份数据库</h4><ul>
<li><p>备份目录</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /home/mongo/temp &amp;&amp; sudo chmod -R <span class="number">777</span> /home/mongo/temp</span><br><span class="line">sudo mkdir -p /home/mongo/all &amp;&amp; sudo chmod -R <span class="number">777</span> /home/mongo/all</span><br></pre></td></tr></table></figure>
</li>
<li><p>备份脚本<br>sudo vim /home/schedule/mongo.sh</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">user=superuser</span><br><span class="line">passwprd=pwd</span><br><span class="line">deldays=2</span><br><span class="line">backdate=`date +%Y-%m-%d`</span><br><span class="line">backname="mg_$backdate.tar.gz"</span><br><span class="line">mongodump=/home/q/mongodb-linux-x86_64-3.2.10/bin/mongodump</span><br><span class="line">temp=/home/mongo/temp</span><br><span class="line">all=/home/mongo/all</span><br><span class="line">cd $temp</span><br><span class="line">rm -rf $temp/*</span><br><span class="line">mkdir -p $temp/$backdate</span><br><span class="line">$mongodump -u $user -p $passwprd -o $temp/$backdate</span><br><span class="line">tar -zcvf $all/$backname $temp/$backdate</span><br><span class="line">find $all/ -mtime +$deldays -delete</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改权限</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod -R <span class="number">777</span> /home/schedule/mongo.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>定时任务<br>sudo vim /etc/crontab</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">40</span> <span class="number">18</span> * * * root /home/schedule/mongo.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>重启定时任务</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /etc/rc.d/init.d/crond restart</span><br></pre></td></tr></table></figure>
</li>
<li><p>开机启动</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chkconfig crond on</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动服务</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service crond start</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="关闭数据库">关闭数据库</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">use admin</span><br><span class="line">db.auth('superuser','pwd')</span><br><span class="line">db.shutdownServer()</span><br><span class="line">#or</span><br><span class="line">db.adminCommand(&#123;shutdown : 1, force : true&#125;)</span><br><span class="line">#or</span><br><span class="line">db.shutdownServer(&#123;force : true&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="常见问题">常见问题</h4><ul>
<li>数据库非正常关闭lock<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /home/q/mongodb-linux-x86_64-<span class="number">3.2</span><span class="number">.10</span>/data/db/mongod.lock</span><br><span class="line">sudo mongod --dbpath /home/q/mongodb-linux-x86_64-<span class="number">3.2</span><span class="number">.10</span>/data/db --repair</span><br><span class="line">sudo ./mongod --dbpath /home/q/mongodb-linux-x86_64-<span class="number">3.2</span><span class="number">.10</span>/data/db</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="推荐数据库软件">推荐数据库软件</h4><ul>
<li>Mac: Toad (app store)</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="环境">环境</h4><ul>
<li>centeros</li>
</ul>
<h4 id="下载">下载</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget http:<span class="comment">//fastdl.mongodb.org/linux/mongodb-linux-x86_64-3.2.10.tgz</span></span><br></pre></td></tr></table></figure>
<h4 id="解压">解压</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo tar -zxvf mongodb-linux-x86_64-<span class="number">3.2</span><span class="number">.10</span>.tgz</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="linux" scheme="http://www.xuerlove.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[fetch]]></title>
    <link href="http://www.xuerlove.com/2016/08/31/fetch/"/>
    <id>http://www.xuerlove.com/2016/08/31/fetch/</id>
    <published>2016-08-31T13:17:37.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h5 id="介绍">介绍</h5><ul>
<li>遵循Promise解决方案</li>
<li>XMLHttpRequest的替代者</li>
</ul>
<h5 id="使用">使用</h5><ul>
<li>引入Promise兼容方案</li>
<li>引入fetch兼容方案（高级浏览器高版本已经支持）</li>
<li>兼容方案以及使用说明见 <a href="https://github.com/github/fetch" target="_blank" rel="external">https://github.com/github/fetch</a><a id="more"></a>
</li>
</ul>
<h5 id="详解">详解</h5><h6 id="Header">Header</h6><h6 id="Request">Request</h6><h6 id="Response">Response</h6><h5 id="示例">示例</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkStatus</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (response.status &gt;= <span class="number">200</span> &amp;&amp; response.status &lt; <span class="number">300</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> response</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> error = <span class="keyword">new</span> <span class="built_in">Error</span>(response.statusText)</span><br><span class="line">    error.response = response</span><br><span class="line">    <span class="keyword">throw</span> error</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseJSON</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> response.json()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fetch(<span class="string">'/test.json'</span>)</span><br><span class="line">  .then(checkStatus)</span><br><span class="line">  .then(parseJSON)</span><br><span class="line">  .then(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'request succeeded with JSON response'</span>, data)</span><br><span class="line">  &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'request failed'</span>, error)</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<h5 id="介绍">介绍</h5><ul>
<li>遵循Promise解决方案</li>
<li>XMLHttpRequest的替代者</li>
</ul>
<h5 id="使用">使用</h5><ul>
<li>引入Promise兼容方案</li>
<li>引入fetch兼容方案（高级浏览器高版本已经支持）</li>
<li>兼容方案以及使用说明见 <a href="https://github.com/github/fetch">https://github.com/github/fetch</a>]]>
    
    </summary>
    
      <category term="javascript" scheme="http://www.xuerlove.com/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[touch开发性能优化]]></title>
    <link href="http://www.xuerlove.com/2016/04/14/touch%E5%BC%80%E5%8F%91%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/"/>
    <id>http://www.xuerlove.com/2016/04/14/touch开发性能优化/</id>
    <published>2016-04-14T02:43:35.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="介绍">介绍</h4><blockquote>
<p>不觉间开发touch也有一段时间了，之前一直都在做pc端的工作，恍然间发现pc端和touch端开发，也并不能说完全是一回事，当然了代码还是那些代码。这里我要说什么问题呢，就是touch端经常出现的性能相关的问题。通过亲身踩坑，总结一些经验。</p>
</blockquote>
<a id="more"></a>
<h4 id="代码">代码</h4><blockquote>
<p>从代码层面讲，不能得过且过，务必做到精简，高效。移动端平台分ios android windows phone等，每个平台又有很多手机生产商，每种手机的性能又差异很大，还有些厂商还会自己定制浏览器内核，等等因素吧，导致了移动端经常出现各种差异性的表现，常常顾此失彼。那么就要求我们写的代码效率高一些，逻辑精简些，从程序层面减少因性能带来的问题，这是最好的方法去避免出现一些奇葩问题。还要做好一系列的异常处理措施，不要让代码出现报错的情况。减少dom操作，增加数据缓存机制，离线数据处理等。</p>
</blockquote>
<h4 id="框架">框架</h4><blockquote>
<p>最近在开发过程中，使用了reactjs这个框架，不得不说这个框架应用起来还是比较顺利的，从开发到最终的页面表现来说，都是比较满意的。但是有一个问题是，在生成的代码中会生成过多的dom节点，这一点需要注意一下。</p>
</blockquote>
<h4 id="组件">组件</h4><blockquote>
<p>应用第三方组建，还是要慎重考虑的，这里就拿iscroll来说，这个组建无疑优化了滑动的体验，但是它是非常耗性能的，还有就是安卓手机上的表现并不理想，在一些滚动监听上也存在问题。</p>
</blockquote>
<h4 id="布局与css">布局与css</h4><blockquote>
<p>从使用flex到弃用flex, css动画也要注意</p>
</blockquote>
<h4 id="硬件加速">硬件加速</h4><blockquote>
<p>硬件加速是一件好事，但是它的弊端也显露无疑，电池耗电快，手机发热等等</p>
</blockquote>
<h4 id="hybrid">hybrid</h4>]]></content>
    <summary type="html">
    <![CDATA[<h4 id="介绍">介绍</h4><blockquote>
<p>不觉间开发touch也有一段时间了，之前一直都在做pc端的工作，恍然间发现pc端和touch端开发，也并不能说完全是一回事，当然了代码还是那些代码。这里我要说什么问题呢，就是touch端经常出现的性能相关的问题。通过亲身踩坑，总结一些经验。</p>
</blockquote>]]>
    
    </summary>
    
      <category term="web" scheme="http://www.xuerlove.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[reactjs应用]]></title>
    <link href="http://www.xuerlove.com/2016/04/14/reactjs%E5%BA%94%E7%94%A8/"/>
    <id>http://www.xuerlove.com/2016/04/14/reactjs应用/</id>
    <published>2016-04-14T02:42:32.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="reactjs">reactjs</h4><p>官方文档 <a href="http://reactjs.cn/react/docs/getting-started.html" target="_blank" rel="external">http://reactjs.cn/react/docs/getting-started.html</a></p>
<h5 id="引用reactjs框架">引用reactjs框架</h5><ul>
<li>实时转换工具 <code>npm install -g react-tools</code> 启动命令 <code>jsx --watch src/ build/</code> （或者页面引入jsx编译工具）</li>
<li>引入fetch <a href="https://github.com/github/fetch" target="_blank" rel="external">https://github.com/github/fetch</a> （引入Promise）</li>
<li>jsx <a href="http://reactjs.cn/react/docs/jsx-in-depth.html" target="_blank" rel="external">http://reactjs.cn/react/docs/jsx-in-depth.html</a><a id="more"></a>
</li>
</ul>
<h5 id="过程">过程</h5><ul>
<li>通过 React.createClass 定义组件</li>
<li>组件包含的属性，方法(<a href="http://reactjs.cn/react/docs/component-specs.html" target="_blank" rel="external">http://reactjs.cn/react/docs/component-specs.html</a>)<ul>
<li>render</li>
<li>getInitialState</li>
<li>getDefaultProps</li>
<li>propTypes</li>
<li>mixins</li>
<li>statics</li>
<li>displayName</li>
</ul>
</li>
<li>生命周期方法(<a href="http://reactjs.cn/react/docs/component-specs.html" target="_blank" rel="external">http://reactjs.cn/react/docs/component-specs.html</a>)<ul>
<li>componentWillMount</li>
<li>componentDidMount</li>
<li>componentWillReceiveProps</li>
<li>shouldComponentUpdate</li>
<li>componentWillUpdate</li>
<li>componentDidUpdate</li>
<li>componentWillUnmount</li>
</ul>
</li>
<li>组件生命周期<blockquote>
<p>了解组件的生命周期很重要，这在我们哪个阶段去调用什么方法是有帮助的，下面就一起来看一下：</p>
</blockquote>
</li>
</ul>
<ol>
<li>getInitialState<ul>
<li>在组件类创建的时候只调用一次，返回值是 this.state 的初始值</li>
</ul>
</li>
<li>componentWillMount<ul>
<li>初始化渲染之前只调用一次，如果在这个阶段setState，更新将会通知render</li>
</ul>
</li>
<li>render<ul>
<li>会根据this.props或者this.state渲染组件</li>
</ul>
</li>
<li>componentDidMount<ul>
<li>在初始化渲染之后只调用一次，可以操作dom和浏览器交互，通过this.DOMNode()获取DOM节点</li>
</ul>
</li>
<li>componentWillReceiveProps<ul>
<li>组件接收到新的props都会调用，初始化的时候不会调用这个方法，可以在这里面更新this.state</li>
</ul>
</li>
<li>componentWillUpdate<ul>
<li>在接收到新的props或者state之前的时候调用，初始化渲染的时候不会调用，里面做更新前的准备工作，不能在里面setState</li>
</ul>
</li>
<li><p>shouldComponentUpdate</p>
<ul>
<li><p>在接收到新的props或者state的时候，渲染之前调用，在初始化的时候不会调用，如果确定新的props和state不会导致组件更新，可以返回false,默认返回true</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shouldComponentUpdate: <span class="function"><span class="keyword">function</span>(<span class="params">nextProps, nextState</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> nextProps.id !== <span class="keyword">this</span>.props.id;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>这个方法可以提升程序性能，一些依赖父级props，组件本身会发送请求的情况，可以判断传入props是否是更新后的，然后再去执行接下来的动作。</p>
</li>
</ul>
</li>
<li>componentDidUpdate<ul>
<li>组件更新到DOM中被调用，初始化的时候不会调用，对dom的操作可以放在这里面执行</li>
</ul>
</li>
<li>componentWillUnmount<ul>
<li>组件从dom中移除的时候调用，这个方法中清除一些定时操作等</li>
</ul>
</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="reactjs">reactjs</h4><p>官方文档 <a href="http://reactjs.cn/react/docs/getting-started.html">http://reactjs.cn/react/docs/getting-started.html</a></p>
<h5 id="引用reactjs框架">引用reactjs框架</h5><ul>
<li>实时转换工具 <code>npm install -g react-tools</code> 启动命令 <code>jsx --watch src/ build/</code> （或者页面引入jsx编译工具）</li>
<li>引入fetch <a href="https://github.com/github/fetch">https://github.com/github/fetch</a> （引入Promise）</li>
<li>jsx <a href="http://reactjs.cn/react/docs/jsx-in-depth.html">http://reactjs.cn/react/docs/jsx-in-depth.html</a>]]>
    
    </summary>
    
      <category term="web" scheme="http://www.xuerlove.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[nodejs开发控制台工具]]></title>
    <link href="http://www.xuerlove.com/2016/04/14/nodejs%E5%BC%80%E5%8F%91%E6%8E%A7%E5%88%B6%E5%8F%B0%E5%B7%A5%E5%85%B7/"/>
    <id>http://www.xuerlove.com/2016/04/14/nodejs开发控制台工具/</id>
    <published>2016-04-14T02:41:56.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="环境要求">环境要求</h4><ul>
<li>nodejs</li>
</ul>
<h4 id="基本文件结构">基本文件结构</h4><ul>
<li>package.json <ul>
<li>使用npm init生成</li>
<li>安装依赖模块使用 npm install 模块名</li>
</ul>
</li>
<li>一个主文件 index.js</li>
</ul>
<a id="more"></a>
<h4 id="例子：">例子：</h4><ul>
<li><p>package.json</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"node-translate"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">"translate"</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"bin"</span>: &#123;</span><br><span class="line">    <span class="string">"trans"</span>: <span class="string">"./index.js"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">"黑卓"</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="string">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"color"</span>: <span class="string">"^0.11.1"</span>,</span><br><span class="line">    <span class="string">"colors"</span>: <span class="string">"^1.1.2"</span>,</span><br><span class="line">    <span class="string">"commander"</span>: <span class="string">"^2.9.0"</span>,</span><br><span class="line">    <span class="string">"request"</span>: <span class="string">"^2.70.0"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>index.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">#! /usr/bin/env node</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line"> * @Author: 黑卓</span><br><span class="line"> * @Date:   2016-04-07 15:47:33</span><br><span class="line"> * @Last Modified by:   黑卓</span><br><span class="line"> * @Last Modified time: 2016-04-07 17:56:40</span><br><span class="line"> */</span><br><span class="line"></span><br><span class="line">'use strict';</span><br><span class="line"></span><br><span class="line">var request = require('request');</span><br><span class="line">var colors = require('colors');</span><br><span class="line"></span><br><span class="line">var program = require('commander');</span><br><span class="line">program.version('0.0.1').parse(process.argv);</span><br><span class="line"></span><br><span class="line">(function() &#123;</span><br><span class="line"></span><br><span class="line">	var param = process.argv[2];</span><br><span class="line"></span><br><span class="line">	var word = param ? param : '';</span><br><span class="line"></span><br><span class="line">	if (!word) &#123;</span><br><span class="line">		console.log('请输入要查询的单词'.underline.red);</span><br><span class="line">		return false;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	console.log('');</span><br><span class="line">	console.log('要翻译的单词 : '.green + ' : ' + word.underline.red);</span><br><span class="line">	console.log('');</span><br><span class="line"></span><br><span class="line">	var option = &#123;</span><br><span class="line">		from: 'zh',</span><br><span class="line">		to: 'en',</span><br><span class="line">		query: encodeURIComponent(word)</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	if (/^[A-Za-z ]+$/.test(word.trim())) &#123;</span><br><span class="line">		option.from = 'en';</span><br><span class="line">		option.to = 'zh';</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	var url = 'http://test.com'; // 这里换成了假url</span><br><span class="line"></span><br><span class="line">	var paramArray = [];</span><br><span class="line">	for (var item in option) &#123;</span><br><span class="line">		var pStr = item + '=' + option[item];</span><br><span class="line">		paramArray.push(pStr);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	url += '?' + paramArray.join('&amp;');</span><br><span class="line"></span><br><span class="line">	request(url, function(error, response, data) &#123;</span><br><span class="line">		if (!error &amp;&amp; response.statusCode == 200) &#123;</span><br><span class="line">			data = JSON.parse(data);</span><br><span class="line">			if (data &amp;&amp; data.result) &#123;</span><br><span class="line">				console.log('翻译结果 : '.green + data.result.dst.underline.red || '没有查询到结果'.underline.red);</span><br><span class="line">			&#125; else &#123;</span><br><span class="line">				console.log('没有查询到结果'.underline.red);</span><br><span class="line">			&#125;</span><br><span class="line">			console.log('');</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;());</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="链接到全局">链接到全局</h4><p>npm link</p>
<h4 id="自行发布">自行发布</h4><h4 id="request">request</h4><p>request模块让http请求变的简单,<a href="https://www.npmjs.com/package/request" target="_blank" rel="external">https://www.npmjs.com/package/request</a></p>
<h4 id="colors">colors</h4><p>终端着色colors插件,<a href="https://www.npmjs.com/package/colors" target="_blank" rel="external">https://www.npmjs.com/package/colors</a></p>
<h4 id="program">program</h4><p>nodejs命令行参数处理模块commander,<a href="https://www.npmjs.com/package/commander" target="_blank" rel="external">https://www.npmjs.com/package/commander</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="环境要求">环境要求</h4><ul>
<li>nodejs</li>
</ul>
<h4 id="基本文件结构">基本文件结构</h4><ul>
<li>package.json <ul>
<li>使用npm init生成</li>
<li>安装依赖模块使用 npm install 模块名</li>
</ul>
</li>
<li>一个主文件 index.js</li>
</ul>]]>
    
    </summary>
    
      <category term="nodejs" scheme="http://www.xuerlove.com/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[npm包开发]]></title>
    <link href="http://www.xuerlove.com/2016/04/14/npm%E5%8C%85%E5%BC%80%E5%8F%91/"/>
    <id>http://www.xuerlove.com/2016/04/14/npm包开发/</id>
    <published>2016-04-14T02:41:29.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="环境要求">环境要求</h4><ul>
<li>nodejs</li>
</ul>
<h4 id="基本文件结构">基本文件结构</h4><ul>
<li>package.json <ul>
<li>使用npm init生成</li>
<li>安装依赖模块使用 npm install 模块名</li>
</ul>
</li>
<li>一个主文件 index.js</li>
<li>一个lib文件夹<ul>
<li>存放源文件<a id="more"></a>
</li>
</ul>
</li>
</ul>
<h4 id="例子">例子</h4><ul>
<li><p>package.json</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"node-tools"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>index.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line">* @Author: amos</span><br><span class="line">* @Date:   2016-04-08 13:57:37</span><br><span class="line">* @Last Modified by:   amos</span><br><span class="line">* @Last Modified time: 2016-04-08 13:58:26</span><br><span class="line">*/</span></span><br><span class="line"><span class="pi"></span><br><span class="line">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="built_in">require</span>(./lib/index);</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>lib/index.js</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span><br><span class="line"> * @Author: amos</span><br><span class="line"> * @Date:   2016-04-08 13:58:47</span><br><span class="line"> * @Last Modified by:   amos</span><br><span class="line"> * @Last Modified time: 2016-04-08 14:19:04</span><br><span class="line"> */</span></span><br><span class="line"><span class="pi"></span><br><span class="line">'use strict'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> Tools = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">	<span class="comment">//==================================</span></span><br><span class="line">	<span class="comment">// 检测iOS版本</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">gtIOS</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> userAgent = <span class="built_in">window</span>.navigator.userAgent;</span><br><span class="line">		<span class="keyword">var</span> ios = userAgent.match(<span class="regexp">/(iPad|iPhone|iPod)/</span>s + OS / s([<span class="regexp">/d_/</span>.] + ) / );</span><br><span class="line">		<span class="keyword">return</span> ios &amp;&amp; ios[<span class="number">2</span>] &amp;&amp; <span class="built_in">parseInt</span>(ios[<span class="number">2</span>].replace(<span class="regexp">/_/g</span>, <span class="string">'.'</span>), <span class="number">10</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//==================================</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//==================================</span></span><br><span class="line">	<span class="comment">// 检测支持css属性</span></span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">isSupportCss</span>(<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">var</span> prefixTestList = [<span class="string">''</span>, <span class="string">'-webkit-'</span>, <span class="string">'-ms-'</span>, <span class="string">'-moz-'</span>, <span class="string">'-o-'</span>];</span><br><span class="line">		<span class="keyword">var</span> cssText = <span class="string">''</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; prefixTestList.length; i++) &#123;</span><br><span class="line">			cssText += key + <span class="string">':'</span> + prefixTestList[i] + value + <span class="string">';'</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// 创建一个dom来检查</span></span><br><span class="line">		<span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">		<span class="keyword">var</span> body = <span class="built_in">document</span>.body;</span><br><span class="line">		div.style.cssText = <span class="string">'display:none;'</span> + cssText;</span><br><span class="line">		body.appendChild(div);</span><br><span class="line">		<span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(value, i);</span><br><span class="line">		<span class="keyword">var</span> isSupport = reg.test(<span class="built_in">window</span>.getComputedStyle(div)[key]);</span><br><span class="line">		body.removeChild(div);</span><br><span class="line">		div = <span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">return</span> isSupport;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//==================================</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//==================================</span></span><br><span class="line">	<span class="comment">// 防止内容区域滚到底后引起页面整体的滚动</span></span><br><span class="line">	<span class="keyword">var</span> content = <span class="built_in">document</span>.querySelector(<span class="string">'main'</span>);</span><br><span class="line">	<span class="keyword">var</span> startY;</span><br><span class="line"></span><br><span class="line">	content.addEventListener(<span class="string">'touchstart'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">		startY = e.touches[<span class="number">0</span>].clientY;</span><br><span class="line">	&#125;);</span><br><span class="line"></span><br><span class="line">	content.addEventListener(<span class="string">'touchmove'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">		<span class="comment">// 高位表示向上滚动</span></span><br><span class="line">		<span class="comment">// 底位表示向下滚动</span></span><br><span class="line">		<span class="comment">// 1容许 0禁止</span></span><br><span class="line">		<span class="keyword">var</span> status = <span class="string">'11'</span>;</span><br><span class="line">		<span class="keyword">var</span> ele = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">var</span> currentY = e.touches[<span class="number">0</span>].clientY;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (ele.scrollTop === <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="comment">// 如果内容小于容器则同时禁止上下滚动</span></span><br><span class="line">			status = ele.offsetHeight &gt;= ele.scrollHeight ? <span class="string">'00'</span> : <span class="string">'01'</span>;</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (ele.scrollTop + ele.offsetHeight &gt;= ele.scrollHeight) &#123;</span><br><span class="line">			<span class="comment">// 已经滚到底部了只能向上滚动</span></span><br><span class="line">			status = <span class="string">'10'</span>;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (status != <span class="string">'11'</span>) &#123;</span><br><span class="line">			<span class="comment">// 判断当前的滚动方向</span></span><br><span class="line">			<span class="keyword">var</span> direction = currentY - startY &gt; <span class="number">0</span> ? <span class="string">'10'</span> : <span class="string">'01'</span>;</span><br><span class="line">			<span class="comment">// 操作方向和当前允许状态求与运算，运算结果为0，就说明不允许该方向滚动，则禁止默认事件，阻止滚动</span></span><br><span class="line">			<span class="keyword">if</span> (!(<span class="built_in">parseInt</span>(status, <span class="number">2</span>) &amp; <span class="built_in">parseInt</span>(direction, <span class="number">2</span>))) &#123;</span><br><span class="line">				stopEvent(e);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">	<span class="comment">//==================================</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		gtIOS: gtIOS,</span><br><span class="line">		isSupportCss: isSupportCss</span><br><span class="line">	&#125;;</span><br><span class="line">&#125;());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = Tools;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="发布应用">发布应用</h4><pre><code><span class="bullet">* </span>npm发布
<span class="bullet">* </span>通过require的方式引用，直接使用
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[<h4 id="环境要求">环境要求</h4><ul>
<li>nodejs</li>
</ul>
<h4 id="基本文件结构">基本文件结构</h4><ul>
<li>package.json <ul>
<li>使用npm init生成</li>
<li>安装依赖模块使用 npm install 模块名</li>
</ul>
</li>
<li>一个主文件 index.js</li>
<li>一个lib文件夹<ul>
<li>存放源文件]]>
    
    </summary>
    
      <category term="nodejs" scheme="http://www.xuerlove.com/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[移动端布局]]></title>
    <link href="http://www.xuerlove.com/2016/04/14/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%B8%83%E5%B1%80/"/>
    <id>http://www.xuerlove.com/2016/04/14/移动端布局/</id>
    <published>2016-04-14T02:39:45.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<ol>
<li><p>黏性布局 POSITION:STICKY（通过判断支持该属性的浏览器使用该布局） – <a href="http://hao.jser.com/archive/7970/" target="_blank" rel="external">http://hao.jser.com/archive/7970/</a></p>
<a id="more"></a>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.sticky &#123;</span><br><span class="line">    position: -webkit-sticky;</span><br><span class="line">    position: sticky;</span><br><span class="line">    top: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">.fixed &#123;</span><br><span class="line">    position: fixed;</span><br><span class="line">    top: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Web移动端Fixed布局的解决方案  – <a href="http://efe.baidu.com/blog/mobile-fixed-layout/" target="_blank" rel="external">http://efe.baidu.com/blog/mobile-fixed-layout/</a></p>
</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<ol>
<li><p>黏性布局 POSITION:STICKY（通过判断支持该属性的浏览器使用该布局） – <a href="http://hao.jser.com/archive/7970/">http://hao.jser.com/archive/7970/</a></p>]]>
    
    </summary>
    
      <category term="web" scheme="http://www.xuerlove.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[动态脚本]]></title>
    <link href="http://www.xuerlove.com/2015/11/25/%E5%8A%A8%E6%80%81%E8%84%9A%E6%9C%AC/"/>
    <id>http://www.xuerlove.com/2015/11/25/动态脚本/</id>
    <published>2015-11-25T07:03:01.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="动态加载js">动态加载js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span>(<span class="params">data,type</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">	script.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(type === <span class="number">1</span>)&#123;</span><br><span class="line">			script.appendChild(<span class="built_in">document</span>.createTextNode(data));</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			script.src = data;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">catch</span>(ex)&#123;</span><br><span class="line">		<span class="keyword">if</span>(type === <span class="number">1</span>)&#123;</span><br><span class="line">			script.text = code</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			script.src = data;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="动态样式">动态样式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadStyle</span>(<span class="params">data,type</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> style = <span class="built_in">document</span>.createElement(<span class="string">"style"</span>);</span><br><span class="line">	style.type = <span class="string">"text/css"</span>;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(type === <span class="number">1</span>)&#123;</span><br><span class="line">			style.appendChild(<span class="built_in">document</span>.createTextNode(data));</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			style.href = data;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">catch</span>(ex)&#123;</span><br><span class="line">		<span class="keyword">if</span>(type === <span class="number">1</span>)&#123;</span><br><span class="line">			style.styleSheet.cssText = css;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			style.href = data;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">var</span> head = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>];</span><br><span class="line">	head.appendChild(style);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<h4 id="动态加载js">动态加载js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadScript</span>(<span class="params">data,type</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">	script.type = <span class="string">"text/javascript"</span>;</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(type === <span class="number">1</span>)&#123;</span><br><span class="line">			script.appendChild(<span class="built_in">document</span>.createTextNode(data));</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			script.src = data;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;<span class="keyword">catch</span>(ex)&#123;</span><br><span class="line">		<span class="keyword">if</span>(type === <span class="number">1</span>)&#123;</span><br><span class="line">			script.text = code</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			script.src = data;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">document</span>.body.appendChild(script);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="javascript" scheme="http://www.xuerlove.com/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[DOM操作]]></title>
    <link href="http://www.xuerlove.com/2015/11/24/DOM%E6%93%8D%E4%BD%9C/"/>
    <id>http://www.xuerlove.com/2015/11/24/DOM操作/</id>
    <published>2015-11-24T07:03:01.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="Node">Node</h4><h5 id="操作节点">操作节点</h5><ul>
<li>appendChild()<br>一个参数，要插入的节点</li>
<li>insertBefore()<br>两个参数，要插入的节点和参照的节点</li>
<li>replaceChild()<br>两个参数，要插入的节点和要替换的节点</li>
<li>removeChild()<br>一个参数，要移除的节点</li>
<li>cloneNode()<br>一个参数，布尔值，是否执行深度克隆</li>
<li>normalize()<br>合并文本节点<a id="more"></a>
</li>
</ul>
<h4 id="Document">Document</h4><h5 id="document-getElementById">document.getElementById</h5><ul>
<li>IE7及以前的版本忽略大小写，除此之外必须严格按照大小写</li>
<li>如果不传参数返回null</li>
<li>IE7及以前的版本如果表单元素name属性和某元素id相等，会返回表单元素<h5 id="document-getElementsByTagName">document.getElementsByTagName</h5></li>
<li>返回标签元素的集合<h5 id="namedItem_返回标签集合中指定name元素">namedItem 返回标签集合中指定name元素</h5></li>
<li>使用中括号的方式能达到namedItem效果</li>
<li>获取所有html元素，传入<code>*</code><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> images = <span class="built_in">document</span>.getElementsByTagName(<span class="string">'image'</span>);</span><br><span class="line"><span class="keyword">var</span> logo = images.namedItem(<span class="string">'logo'</span>);</span><br><span class="line"><span class="keyword">var</span> author = images[<span class="string">'author'</span>];</span><br><span class="line"><span class="built_in">document</span>.getElementsByName</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>与 document.getElementsByTagName 类似</p>
<h5 id="特殊方法">特殊方法</h5><ul>
<li>document.anchors返回所有带name的a元素</li>
<li>document.forms返回所有form元素</li>
<li>document.images返回所有img元素</li>
<li>document.links返回所有带href的元素<h5 id="元素属性">元素属性</h5></li>
<li>id 元素唯一标示</li>
<li>title 附加说明</li>
<li>className 元素css类</li>
<li>lang 元素内容语言代码</li>
<li>dir 语言方向</li>
</ul>
<h5 id="元素方法">元素方法</h5><ul>
<li>getAttribute<br>不能获取style属性，以及类似onclick这样的事件处理属性</li>
<li>setAttribute<br>设置属性值，接收两个参数，第一个是属性名，第二个是属性值</li>
<li>removeAttribute<br>彻底删除属性</li>
<li>attributes属性<br>Element类型拥有attributes属性</li>
</ul>
<h5 id="方法">方法</h5><ul>
<li><p>getNamedItem(name) 返回指定属性值 (可以使用方括号访问方式)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> id = elements.attributes.getNamedItem(<span class="string">'id'</span>).nodeValue;</span><br><span class="line"><span class="keyword">var</span> id = elements.attributes[<span class="string">'id'</span>].nodeValue;</span><br></pre></td></tr></table></figure>
</li>
<li><p>removeNamedItem(name) 移除指定属性</p>
</li>
<li>setNamedItem(node) 添加属性</li>
<li><p>item(pos) 返回位于pos位置的节点</p>
</li>
<li><p>遍历所有属性的时候可以使用这些方法</p>
</li>
<li>attributes属性,不同浏览器返回顺序不一致</li>
<li>IE7及以前的版本会返回所有可能的属性，为避免这个，需要使用specified检测，未设置过的特性为false</li>
</ul>
<h5 id="创建元素">创建元素</h5><ul>
<li><p>document.createElement()<br>接收一个参数，创建的标签</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line">div.id=<span class="string">"top"</span>;</span><br><span class="line">div.className = <span class="string">"m-top"</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>IE中支持参数传入完整的标签内容，有助于避免IE7以及以前版本的一些bug</li>
<li>不能动态设置iframe name属性</li>
<li>创建name相同的radio，互无联系</li>
<li>但是，这样方式又只有IE才支持，所以，使用时需要做检测执行<h5 id="Text文本节点">Text文本节点</h5>创建文本节点document.createTextNode()<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ele = <span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span><br><span class="line"><span class="keyword">var</span> txt = <span class="built_in">document</span>.createTextNode(<span class="string">'hello'</span>);</span><br><span class="line">ele.appendChild(txt);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(ele);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h5 id="规范化文本节点">规范化文本节点</h5><ul>
<li>使用normalize()方法合并文本节点</li>
</ul>
<h5 id="分割文本节点">分割文本节点</h5><ul>
<li>splitText(pos)方法，pos是指定位置<h5 id="其它方法">其它方法</h5></li>
<li>appendData(text)</li>
<li>deleteData(offset,count)</li>
<li>insertData(offset,text)</li>
<li>replaceData(offset,count,text)</li>
<li>substringData(offset,data)</li>
</ul>
<h5 id="DocumentFragment">DocumentFragment</h5><ul>
<li>文档片段，创建方法<br>  document.createDocumentFragment()</li>
<li>操作复杂dom的时候，可以使用片段操作，这样会避免页面多次页面重新渲染</li>
</ul>
<h5 id="Attr属性">Attr属性</h5><ul>
<li>创建属性<br>document.createAttribute()<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> attr = <span class="built_in">document</span>.createAttribute(<span class="string">'align'</span>);</span><br><span class="line">attr.value = <span class="string">'left'</span>;</span><br><span class="line">ele.setAttribute(attr);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="selector_API">selector API</h5><ol>
<li>querySelector()<ul>
<li>接收css选择符，返回匹配到的第一个元素</li>
<li>document.querySelector()</li>
<li>document.body.querySelector()</li>
</ul>
</li>
<li>querySelectorAll()<ul>
<li>返回NodeList,使用与querySelector()相同</li>
</ul>
</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="Node">Node</h4><h5 id="操作节点">操作节点</h5><ul>
<li>appendChild()<br>一个参数，要插入的节点</li>
<li>insertBefore()<br>两个参数，要插入的节点和参照的节点</li>
<li>replaceChild()<br>两个参数，要插入的节点和要替换的节点</li>
<li>removeChild()<br>一个参数，要移除的节点</li>
<li>cloneNode()<br>一个参数，布尔值，是否执行深度克隆</li>
<li>normalize()<br>合并文本节点]]>
    
    </summary>
    
      <category term="javascript" scheme="http://www.xuerlove.com/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[shell基础]]></title>
    <link href="http://www.xuerlove.com/2015/11/23/shell%E5%9F%BA%E7%A1%80/"/>
    <id>http://www.xuerlove.com/2015/11/23/shell基础/</id>
    <published>2015-11-23T07:03:01.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="shell分类">shell分类</h4><ul>
<li>Bourne Shell（/usr/bin/sh或/bin/sh）</li>
<li>Bourne Again Shell（/bin/bash）</li>
<li>C Shell（/usr/bin/csh）</li>
<li>K Shell（/usr/bin/ksh）</li>
<li>Shell for Root（/sbin/sh）</li>
<li>eg.<a id="more"></a>
</li>
</ul>
<h5 id="#!"><code>#!</code></h5><blockquote>
<p><code>#!</code>告诉系统其后路径所指定的程序即是解释此脚本文件的Shell程序。</p>
<ul>
<li>执行<ul>
<li><code>./test.sh</code>使用想对路径</li>
<li>sh test.sh</li>
</ul>
</li>
<li>变量<ul>
<li>直接使用变量名 <code>test=&quot;123&quot;</code></li>
</ul>
</li>
</ul>
</blockquote>
<ul>
<li>变量名和等号之间不能有空格</li>
<li>首个字符必须为字母（a-z，A-Z）。</li>
<li>中间不能有空格，可以使用下划线（_）。</li>
<li>不能使用标点符号。</li>
<li>不能使用bash里的关键字（可用help命令查看保留关键字）。</li>
</ul>
<h5 id="使用语句给变量赋值">使用语句给变量赋值</h5><ul>
<li>for file inls /etc``</li>
</ul>
<h5 id="使用变量">使用变量</h5><blockquote>
<p>在变量名前添加美元符号 <code>$</code><br><code>$test</code>或者<code>${test}</code></p>
</blockquote>
<h5 id="字符串">字符串</h5><ul>
<li>单引号<ul>
<li>不能使用变量</li>
<li>不能出现单引号，不能使用转译字符</li>
</ul>
</li>
<li>双引号<ul>
<li>可以使用变量</li>
<li>可以使用转译字符</li>
</ul>
</li>
</ul>
<h5 id="拼接字符串">拼接字符串</h5><ul>
<li>不需要使用 <code>+</code> 符号<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name=<span class="string">"zhuo"</span></span><br><span class="line">say=<span class="string">"hi "</span>$name<span class="string">" !"</span></span><br><span class="line">says = <span class="string">"hi $&#123;name&#125; !"</span></span><br><span class="line">echo say says</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="字符串长度">字符串长度</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string="tetetete"</span><br><span class="line">echo $&#123;#string&#125;</span><br></pre></td></tr></table></figure>
<h5 id="截取字符串">截取字符串</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">"tetetete"</span></span><br><span class="line">echo $&#123;string:<span class="number">2</span>:<span class="number">4</span>&#125;</span><br></pre></td></tr></table></figure>
<h5 id="查找字符串">查找字符串</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">string=<span class="string">"asdfsdf werfvsd"</span></span><br><span class="line">echo <span class="string">`expr index "$string" is`</span></span><br></pre></td></tr></table></figure>
<h5 id="数组">数组</h5><p>创建数组以及访问数组<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">arr=(1,2,3,4,5)</span><br><span class="line">#或者</span><br><span class="line">arr[0]=1</span><br><span class="line">arr[1]=2</span><br><span class="line">arr[2]=3</span><br><span class="line">#访问</span><br><span class="line">echo $&#123;arr[0]&#125;</span><br><span class="line">#访问所有元素</span><br><span class="line">echo $&#123;arr[@]&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="数组长度">数组长度</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">len=$&#123;#arr[@]&#125;</span><br></pre></td></tr></table></figure>
<p>或者<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">len=$&#123;$arr[*]&#125;</span><br></pre></td></tr></table></figure></p>
<p>数组单个元素长度<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">len=$&#123;$arr[n]&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="注释">注释</h5><ul>
<li>不支持多行注释，单行注释使用#</li>
<li>开发过程中，为方便注释，可以把需要注释的代码放在一个函数中<h5 id="echo">echo</h5>输出字符串<br>echo string<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &#34;test&#34;&#10;echo test&#10;echo &#34;\&#34;test\&#34;&#34;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="read">read</h5><p>输入字符<br>read name<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh</span><br><span class="line">read name</span><br><span class="line">echo "$&#123;name&#125;"</span><br></pre></td></tr></table></figure></p>
<h5 id="显示">显示</h5><p><code>-e</code>开启转义<br>换行<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo -e "test!\n" # \n换行</span><br><span class="line">echo "ok"</span><br></pre></td></tr></table></figure></p>
<h5 id="不换行">不换行</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo -e "test!\c" # \c不换行</span><br><span class="line">echo "ok"</span><br></pre></td></tr></table></figure>
<h5 id="输出到文件">输出到文件</h5><p><code>echo &quot;test&quot; &gt; test.txt</code></p>
<h5 id="原格式输出">原格式输出</h5><p>使用单引号，不进行转义</p>
<h5 id="显示执行结果">显示执行结果</h5><p><code>echo</code>data``</p>
<h5 id="test命令">test命令</h5><p>检测某个条件是否成立</p>
<pre><code>* 数值测试
<span class="comment"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-eq	等于则为真</span><br><span class="line">-ne	不等于则为真</span><br><span class="line">-gt	大于则为真</span><br><span class="line">-ge	大于等于则为真</span><br><span class="line">-lt	小于则为真</span><br><span class="line">-le	小于等于则为真</span><br></pre></td></tr></table></figure></span>

<span class="comment"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x=read</span><br><span class="line">y=read</span><br><span class="line"><span class="keyword">if</span> test $[x] -eq $[y]</span><br><span class="line">then</span><br><span class="line">	echo <span class="string">"ok"</span></span><br><span class="line">elif test $x -gt $y</span><br><span class="line">	echo <span class="string">"gt"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	echo <span class="string">"bad"</span></span><br><span class="line">fi</span><br></pre></td></tr></table></figure></span>

* 字符串测试
<span class="comment"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">=	等于则为真</span><br><span class="line">!=	不相等则为真</span><br><span class="line">-z 字符串	字符串长度伪则为真</span><br><span class="line">-n 字符串	字符串长度不伪则为真</span><br></pre></td></tr></table></figure></span>

<span class="comment"><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x=read</span><br><span class="line">y=read</span><br><span class="line"><span class="keyword">if</span> test $x -eq $y</span><br><span class="line">then</span><br><span class="line">	echo <span class="string">"ok"</span></span><br><span class="line">elif test $x -gt $y</span><br><span class="line">	echo <span class="string">"gt"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	echo <span class="string">"bad"</span></span><br><span class="line">fi</span><br></pre></td></tr></table></figure></span>
</code></pre><h5 id="文件测试">文件测试</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-e 文件名	如果文件存在则为真</span><br><span class="line">-r 文件名	如果文件存在且可读则为真</span><br><span class="line">-w 文件名	如果文件存在且可写则为真</span><br><span class="line">-x 文件名	如果文件存在且可执行则为真</span><br><span class="line">-s 文件名	如果文件存在且至少有一个字符则为真</span><br><span class="line">-d 文件名	如果文件存在且为目录则为真</span><br><span class="line">-f 文件名	如果文件存在且为普通文件则为真</span><br><span class="line">-c 文件名	如果文件存在且为字符型特殊文件则为真</span><br><span class="line">-b 文件名	如果文件存在且为块特殊文件则为真</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> test -e ./blog</span><br><span class="line">then </span><br><span class="line">	echo <span class="string">'file exists'</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	echo <span class="string">'file does not exists'</span></span><br><span class="line">fi</span><br><span class="line"><span class="string">``</span><span class="string">`javascript</span><br><span class="line">`</span>Shell还提供了 与( -a )、或( -o )、非( ! ) 三个逻辑操作符用于将测试条件连接起来，优先级：”!” “-a” “-o”<span class="string">`</span><br><span class="line">##### 流程控制</span><br><span class="line">* if else</span><br><span class="line">`</span><span class="string">``</span>javascript</span><br><span class="line">x=read</span><br><span class="line">y=read</span><br><span class="line"><span class="keyword">if</span> test $x -eq $y</span><br><span class="line">then</span><br><span class="line">	echo <span class="string">"ok"</span></span><br><span class="line">elif test $x -gt $y</span><br><span class="line">	echo <span class="string">"gt"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">	echo <span class="string">"bad"</span></span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
<h5 id="for">for</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> it <span class="keyword">in</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">5</span> <span class="number">6</span> <span class="number">7</span> <span class="number">8</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	echo $it</span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<h5 id="while">while</h5><p>条件为真则执行<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">count=<span class="number">1</span></span><br><span class="line"><span class="keyword">while</span>(($count&lt;<span class="number">10</span>))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	echo $count</span><br><span class="line">	<span class="keyword">let</span> <span class="string">"count++"</span></span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<h5 id="until">until</h5><p>直到条件为真停止,用法与while相同<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">count=<span class="number">100</span></span><br><span class="line">until(($count&lt;=<span class="number">10</span>))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">	echo $count</span><br><span class="line">	<span class="keyword">let</span> <span class="string">"count--"</span></span><br><span class="line">done</span><br></pre></td></tr></table></figure></p>
<h5 id="case">case</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">echo <span class="string">'请输入1-3的数字:'</span></span><br><span class="line">read num</span><br><span class="line"><span class="keyword">case</span> $num <span class="keyword">in</span></span><br><span class="line">	<span class="number">1</span>) echo <span class="string">'你输入了1'</span></span><br><span class="line">	;;</span><br><span class="line">	<span class="number">2</span>) echo <span class="string">'你输入了2'</span></span><br><span class="line">	;;</span><br><span class="line">	<span class="number">3</span>) echo <span class="string">'你输入了3'</span></span><br><span class="line">	;;</span><br><span class="line">	*) echo <span class="string">'你没有输入1到3的数字'</span></span><br><span class="line">	;;</span><br><span class="line">esac</span><br></pre></td></tr></table></figure>
<h5 id="break">break</h5><p>跳出所有循环</p>
<h5 id="continue">continue</h5><p>结束当前循环，继续执行下一次循环</p>
<h5 id="函数">函数</h5><ul>
<li>定义方式,不需要带参数</li>
<li>function fun()</li>
<li>fun()<ul>
<li>参数返回，使用return</li>
<li>函数调用，直接使用函数名，不需要加括号，带有参数直接在后面列出，用空格间隔</li>
<li>函数返回值在调用函数后，可以通过$?使用</li>
<li>函数中的参数，可以使用$n来表示，n&gt;10的时候，使用${n}</li>
<li>特殊参数<ul>
<li><code>$#</code> 传递到脚本的参数个数</li>
<li><code>$*</code> 以一个单字符串显示所有向脚本传递的参数</li>
<li><code>$$</code> 脚本运行的当前进程ID号</li>
<li><code>$!</code> 后台运行的最后一个进程的ID号</li>
<li><code>$@</code> 与$*相同，但是使用时加引号，并在引号中返回每个参数。</li>
<li><code>$-</code> 显示Shell使用的当前选项，与set命令功能相同。</li>
<li><code>$?</code> 显示最后命令的退出状态。0表示没有错误，其他任何值表明有错误。</li>
</ul>
</li>
</ul>
</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="shell分类">shell分类</h4><ul>
<li>Bourne Shell（/usr/bin/sh或/bin/sh）</li>
<li>Bourne Again Shell（/bin/bash）</li>
<li>C Shell（/usr/bin/csh）</li>
<li>K Shell（/usr/bin/ksh）</li>
<li>Shell for Root（/sbin/sh）</li>
<li>eg.]]>
    
    </summary>
    
      <category term="linux" scheme="http://www.xuerlove.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[使用nproxy实现本地代理]]></title>
    <link href="http://www.xuerlove.com/2015/11/22/%E4%BD%BF%E7%94%A8nproxy%E5%AE%9E%E7%8E%B0%E6%9C%AC%E5%9C%B0%E4%BB%A3%E7%90%86/"/>
    <id>http://www.xuerlove.com/2015/11/22/使用nproxy实现本地代理/</id>
    <published>2015-11-22T07:03:01.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="安装">安装</h4><h5 id="先安装Node-js">先安装Node.js</h5><h5 id="安装nproxy">安装nproxy</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g nproxy</span><br></pre></td></tr></table></figure>
<h5 id="nproxy介绍">nproxy介绍</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Options:</span><br><span class="line">    -h, --help               output usage information</span><br><span class="line">    -V, --version            output the version number</span><br><span class="line">    -l, --list [list]        Specify the replace rule file</span><br><span class="line">    -p, --port [port]        Specify the port</span><br><span class="line">    -t, --timeout [timeout]  Specify the request timeout(<span class="number">5</span> seconds by <span class="keyword">default</span>)</span><br><span class="line">    -d, --debug              Enable debug mode</span><br><span class="line">    -n, --networks           Display network interface list</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h5 id="开启代理端口">开启代理端口</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nproxy -l replace_rule.js -p <span class="number">8188</span></span><br></pre></td></tr></table></figure>
<p>使用本地replace_rule.js转换规则，监听本地8188端口</p>
<h5 id="replace_rule-js">replace_rule.js</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = [</span><br><span class="line">    &#123;</span><br><span class="line">        pattern:<span class="string">'http://test.test.com/pro/(.*)'</span>,</span><br><span class="line">        responder:<span class="string">"http://127.0.0.1/pro/$1"</span></span><br><span class="line">    &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<h5 id="浏览器怎么做">浏览器怎么做</h5><ul>
<li>安装代理插件，一大堆</li>
<li>配置代理 127.0.0.1 端口8188</li>
<li>可以设置自动转换规则，即：哪些网站使用这个代理</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="安装">安装</h4><h5 id="先安装Node-js">先安装Node.js</h5><h5 id="安装nproxy">安装nproxy</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm install -g nproxy</span><br></pre></td></tr></table></figure>
<h5 id="nproxy介绍">nproxy介绍</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Options:</span><br><span class="line">    -h, --help               output usage information</span><br><span class="line">    -V, --version            output the version number</span><br><span class="line">    -l, --list [list]        Specify the replace rule file</span><br><span class="line">    -p, --port [port]        Specify the port</span><br><span class="line">    -t, --timeout [timeout]  Specify the request timeout(<span class="number">5</span> seconds by <span class="keyword">default</span>)</span><br><span class="line">    -d, --debug              Enable debug mode</span><br><span class="line">    -n, --networks           Display network interface list</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="web" scheme="http://www.xuerlove.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[javascript面向对象相关]]></title>
    <link href="http://www.xuerlove.com/2015/11/21/javascript%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9B%B8%E5%85%B3/"/>
    <id>http://www.xuerlove.com/2015/11/21/javascript面向对象相关/</id>
    <published>2015-11-21T07:03:01.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="判断属性属于实力对象还是原型">判断属性属于实力对象还是原型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span>(<span class="params">name,obj</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> !(obj.hasOwnProperty) &amp;&amp; (name <span class="keyword">in</span> obj)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="for_in循环">for in循环</h4><blockquote>
<p>for in循环能够返回对象所有可枚举属性，无论实例中的，还是原型中的。即便是实例中重写了原型中不可枚举的属性，也会访问到。但是在IE8及以下存在bug,这样的属性不会被返回</p>
</blockquote>
<p>####继承<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>)</span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125;;</span><br><span class="line">	F.prototype = o;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">subType,superType</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> prototype = object(superType.prototype);</span><br><span class="line">	prototype.constructor = subType;</span><br><span class="line">	subType.prototype = prototype;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.name = name;</span><br><span class="line">	<span class="keyword">this</span>.color = [<span class="string">"red"</span>,<span class="string">"blue"</span>];</span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	alert(<span class="keyword">this</span>.name);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name,age</span>)</span>&#123;</span><br><span class="line">	SuperType.call(<span class="keyword">this</span>,name);</span><br><span class="line">	<span class="keyword">this</span>.age = age;</span><br><span class="line">&#125;</span><br><span class="line">inheritPrototype(SubType,SuperType);</span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	alert(<span class="keyword">this</span>.age);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>只调用了一次SuperType的构造函数，并且避免了在SubType.prototype上面创建不必要的属性，同时原型链还能保持不变。</p>
</blockquote>
<h4 id="单例模式">单例模式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> singleton = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> private = <span class="number">0</span>;</span><br><span class="line">	<span class="function"><span class="keyword">function</span> <span class="title">privateFunc</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		public:<span class="literal">true</span>,</span><br><span class="line">		publicFunc:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			private++;</span><br><span class="line">			<span class="keyword">return</span> privateFunc();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<h4 id="判断属性属于实力对象还是原型">判断属性属于实力对象还是原型</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span>(<span class="params">name,obj</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> !(obj.hasOwnProperty) &amp;&amp; (name <span class="keyword">in</span> obj)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="javascript" scheme="http://www.xuerlove.com/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[nginx配置https]]></title>
    <link href="http://www.xuerlove.com/2015/11/21/nginx%E9%85%8D%E7%BD%AEhttps/"/>
    <id>http://www.xuerlove.com/2015/11/21/nginx配置https/</id>
    <published>2015-11-21T07:03:01.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="安装">安装</h4><h5 id="系统：centos">系统：centos</h5><ul>
<li>wget下载</li>
<li>tar 解压</li>
<li>sudo ./configure —with-http_rewrite_module —with-pcre=../pcre-8.36 —with-* http_stub_status_module —with-http_ssl_module —with-http_realip_module 安装这些模块，如果安装失败，请wget下载缺失的包，解压安装后，再重新执行，等号后面添加模块路径</li>
<li>sudo make</li>
<li>sudo make install<a id="more"></a>
</li>
</ul>
<h5 id="配置转发">配置转发</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">upstream  test&#123;</span><br><span class="line">     server **.**.**.**:****;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">        listen **.**.**.**:<span class="number">8888</span>;</span><br><span class="line">        server_name test.test.com;</span><br><span class="line">        charset utf8;</span><br><span class="line">        gzip                    off;</span><br><span class="line">        gzip_http_version       <span class="number">1.1</span>;</span><br><span class="line">        gzip_buffers            <span class="number">256</span> <span class="number">64</span>k;</span><br><span class="line">        gzip_comp_level         <span class="number">5</span>;</span><br><span class="line">        gzip_min_length         <span class="number">1000</span>;</span><br><span class="line">        gzip_types              application/x-javascript text/javascript text/plain text/xml text/css image/jpeg image/jpg image/png image/gif application/x-shockwave-flash image/x-icon;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">         proxy_set_header  Host  $host;</span><br><span class="line">         proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">         proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        location ~ <span class="regexp">/test/</span> &#123;</span><br><span class="line">                proxy_pass http:<span class="comment">//test;</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="支持https">支持https</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">upstream  test&#123;</span><br><span class="line">     server **.**.**.**:****;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">        listen **.**.**.**:<span class="number">443</span> ssl;</span><br><span class="line">        server_name test.test.com;</span><br><span class="line">        charset utf8;</span><br><span class="line">        gzip                    off;</span><br><span class="line">        gzip_http_version       <span class="number">1.1</span>;</span><br><span class="line">        gzip_buffers            <span class="number">256</span> <span class="number">64</span>k;</span><br><span class="line">        gzip_comp_level         <span class="number">5</span>;</span><br><span class="line">        gzip_min_length         <span class="number">1000</span>;</span><br><span class="line">        gzip_types              application/x-javascript text/javascript text/plain text/xml text/css image/jpeg image/jpg image/png image/gif application/x-shockwave-flash image/x-icon;</span><br><span class="line"></span><br><span class="line">        ssl on;</span><br><span class="line">        ssl_certificate             /home/q/nginx/conf/server.crt;</span><br><span class="line">        ssl_certificate_key         /home/q/nginx/conf/server.key;</span><br><span class="line">        ssl_session_timeout         <span class="number">5</span>m;</span><br><span class="line">        ssl_protocols               SSLv3 TLSv1;</span><br><span class="line">        ssl_ciphers                 ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP;</span><br><span class="line">        ssl_prefer_server_ciphers   on;</span><br><span class="line"></span><br><span class="line">         proxy_set_header  Host  $host;</span><br><span class="line">         proxy_set_header  X-Real-IP  $remote_addr;</span><br><span class="line">         proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        location ~ <span class="regexp">/test/</span> &#123;</span><br><span class="line">                proxy_pass http:<span class="comment">//test;</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="证书">证书</h5><ul>
<li><p>两种方式</p>
<ul>
<li><p>生成证书</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#cd /home/q/nginx/conf</span><br><span class="line">#openssl genrsa -des3 -out server.key 1024</span><br><span class="line">#openssl req -new -key server.key -out server.csr</span><br><span class="line">#openssl rsa -in server.key -out server_nopwd.key</span><br><span class="line">#openssl x509 -req -days 365 -in server.csr -signkey server_nopwd.key -out server.crt</span><br></pre></td></tr></table></figure>
<p>  中途需要输入密码，自己设定即可</p>
</li>
<li>copy<br>  直接copy别的机器上面已经存在的证书</li>
</ul>
</li>
</ul>
<h5 id="浏览器">浏览器</h5><ul>
<li>方法一：如果提示安全提示，点击高级》继续浏览</li>
<li>方法二：把生成的server.crt文件导入到系统的证书管理器就行了，具体方法：不介绍了</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="安装">安装</h4><h5 id="系统：centos">系统：centos</h5><ul>
<li>wget下载</li>
<li>tar 解压</li>
<li>sudo ./configure —with-http_rewrite_module —with-pcre=../pcre-8.36 —with-* http_stub_status_module —with-http_ssl_module —with-http_realip_module 安装这些模块，如果安装失败，请wget下载缺失的包，解压安装后，再重新执行，等号后面添加模块路径</li>
<li>sudo make</li>
<li>sudo make install]]>
    
    </summary>
    
      <category term="web" scheme="http://www.xuerlove.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[表单中按回车键自动提交]]></title>
    <link href="http://www.xuerlove.com/2015/11/20/%E8%A1%A8%E5%8D%95%E4%B8%AD%E6%8C%89%E5%9B%9E%E8%BD%A6%E9%94%AE%E8%87%AA%E5%8A%A8%E6%8F%90%E4%BA%A4/"/>
    <id>http://www.xuerlove.com/2015/11/20/表单中按回车键自动提交/</id>
    <published>2015-11-20T07:03:01.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="当form表单中只有一个&lt;input_type=&quot;text&quot;_name=&#39;name&#39;_/&gt;时按回车键将会自动将表单提交。">当form表单中只有一个<code>&lt;input type=&quot;text&quot; name=&#39;name&#39; /&gt;</code>时按回车键将会自动将表单提交。</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=<span class="string">'formSubmit'</span> action=<span class="string">'login.jsp'</span> method=<span class="string">'post'</span>&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">'text'</span> <span class="attribute">name</span>=<span class="value">'name'</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="不需要提交的解决方案">不需要提交的解决方案</h4><ul>
<li><p>添加一个</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">'text'</span> style=<span class="string">'display:none'</span>/&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>不显示输入框，然后回车之后也不会提交：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=<span class="string">'formSubmit'</span> action=<span class="string">'login.jsp'</span> method=<span class="string">'post'</span>&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">'text'</span> <span class="attribute">name</span>=<span class="value">'name'</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">style</span>=<span class="value">'display:none'</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>添加一个onkeydown事件，然后回车之后也不会提交：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=<span class="string">'formSubmit'</span> action=<span class="string">'login.jsp'</span> method=<span class="string">'post'</span>&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">'text'</span> <span class="attribute">name</span>=<span class="value">'name'</span> <span class="attribute">onkeydown</span>=<span class="value">'if(event.keyCode==13) return false;'</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>如果想添加回车事件可以在onkeydown事件中添加判断提交表单：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=<span class="string">'formSubmit'</span> action=<span class="string">'login.jsp'</span> method=<span class="string">'post'</span>&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">style</span>=<span class="value">'display:none'</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">'text'</span> <span class="attribute">name</span>=<span class="value">'name'</span> <span class="attribute">onkeydown</span>=<span class="value">'if(event.keyCode==13)&#123;bindSubmit();&#125;'</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>我们有时候希望回车键敲在文本框（input element）里来提交表单（form），但有时候又不希望如此。比如搜索行为，希望输入完关键词之后直接按回车键立即提交表单，<br>而有些复杂表单，可能要避免回车键误操作在未完成表单填写的时候就触发了表单提交。</p>
</blockquote>
<h4 id="要控制这些行为，不需要借助js，浏览器已经帮我们做了这些处理，这里总结几条规则：">要控制这些行为，不需要借助js，浏览器已经帮我们做了这些处理，这里总结几条规则：</h4><ul>
<li>如果表单里有一个type=”submit”的按钮，回车键生效。</li>
<li>如果表单里只有一个type=”text”的input，不管按钮是什么type，回车键生效。</li>
<li>如果按钮不是用input，而是用button，并且没有加type，IE下默认为type=button，FX默认为type=submit。</li>
<li>其他表单元素如textarea、select不影响，radio checkbox不影响触发规则，但本身在FX下会响应回车键，在IE下不响应。</li>
<li>type=”image”的input，效果等同于type=”submit”，不知道为什么会设计这样一种type，不推荐使用，应该用CSS添加背景图合适些。</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="当form表单中只有一个&lt;input_type=&quot;text&quot;_name=&#39;name&#39;_/&gt;时按回车键将会自动将表单提交。">当form表单中只有一个<code>&lt;input type=&quot;text&quot; name=&#39;name&#39; /&gt;</code>时按回车键将会自动将表单提交。</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=<span class="string">'formSubmit'</span> action=<span class="string">'login.jsp'</span> method=<span class="string">'post'</span>&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">input</span> <span class="attribute">type</span>=<span class="value">'text'</span> <span class="attribute">name</span>=<span class="value">'name'</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">form</span>&gt;</span></span></span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="web" scheme="http://www.xuerlove.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[前端知识点集合]]></title>
    <link href="http://www.xuerlove.com/2015/11/19/%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9%E9%9B%86%E5%90%88/"/>
    <id>http://www.xuerlove.com/2015/11/19/前端知识点集合/</id>
    <published>2015-11-19T07:03:01.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="getBoundingClientRect">getBoundingClientRect</h4><blockquote>
<p>计算视口坐标,方法返回一个有left、right、top、bottom属性的对象，分别表示元素四个位置的相对于视口的坐标。getBoundingClientRect所返回的坐标包含元素的内边距和边框，不包含外边距。兼容性很好，非常好用.</p>
</blockquote>
<h4 id="scrollIntoView">scrollIntoView</h4><blockquote>
<p>可以让元素直接呈现到可视区域，实际上是屏幕显示区的最顶端<br><a id="more"></a></p>
</blockquote>
<h4 id="检查图片是否加在完">检查图片是否加在完</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'img'</span>).load(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'load over'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="修复加载失败的图片">修复加载失败的图片</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">'img'</span>).on(<span class="string">'error'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	$(<span class="keyword">this</span>).prop(<span class="string">'src'</span>,<span class="string">'/default.png'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="回到顶部">回到顶部</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).animate(&#123;scrollTop:<span class="number">0</span>&#125;,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
<h4 id="图片预加载">图片预加载</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$.preLoad = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>,len = <span class="built_in">arguments</span>.length;i&lt;len;i++)&#123;</span><br><span class="line">		<span class="keyword">var</span> $img = $(<span class="string">'&lt;img&gt;'</span>);</span><br><span class="line">		$img.attr(<span class="string">'src'</span>,<span class="built_in">arguments</span>[i]);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> imgList = [<span class="string">'/img1.png'</span>,<span class="string">'/img2.png'</span>];</span><br><span class="line">$.preLoad(imgList);</span><br><span class="line"><span class="string">``</span><span class="string">`javascript</span><br><span class="line">#### visible</span><br><span class="line">`</span><span class="string">``</span>javascript</span><br><span class="line">$(<span class="built_in">document</span>).on(<span class="string">'visibilitychange'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (e.target.visibilityState === <span class="string">'visible'</span>) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'visible'</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'hidden'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>用来监听浏览器是否处于激活状态，可视状态</p>
<h4 id="ajax调用错误处理">ajax调用错误处理</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="built_in">document</span>).ajaxError(<span class="function"><span class="keyword">function</span>(<span class="params">e,xhr,settings,error</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="获取用户输入keyCode">获取用户输入keyCode</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"text"</span> onkeydown=<span class="string">"getCode(event);"</span> &gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Javascript 代码</span></span><br><span class="line"><span class="comment">//代码如下:</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getCode</span>(<span class="params">evt</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//兼容IE和Firefox获得keyBoardEvent对象</span></span><br><span class="line">	evt =  evt || <span class="built_in">window</span>.event;</span><br><span class="line">	<span class="comment">//兼容IE和Firefox获得keyBoardEvent对象的键值</span></span><br><span class="line">	<span class="keyword">var</span> key = evt.keyCode || evt.which;</span><br><span class="line">	<span class="comment">//显示按键键值</span></span><br><span class="line">	<span class="built_in">console</span>.info(key);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Date在IE8以下版本的问题">Date在IE8以下版本的问题</h4><p>使用 new Date(‘2015-10-10’),在ie8下会转成NaN,需要使用new Date(‘2015/10/10’)，我们可以自定义一个时间转换函数<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parse</span>(<span class="params"> dateStr </span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>( dateStr <span class="keyword">instanceof</span> <span class="built_in">Date</span> )&#123;</span><br><span class="line">        <span class="keyword">return</span> dateStr;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span>( <span class="regexp">/^\d+$/</span>.test( dateStr ) ) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>( <span class="built_in">parseInt</span>( dateStr , <span class="number">10</span> ) );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>( <span class="built_in">Date</span>.parse( dateStr.replace(<span class="regexp">/-/g</span>,<span class="string">'/'</span>) ) );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="搜索框的值">搜索框的值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">"#js_ipt"</span>)</span><br><span class="line">   .focus(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;$(<span class="keyword">this</span>).val(<span class="string">''</span>)&#125;)</span><br><span class="line">   .blur(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="keyword">var</span> $<span class="keyword">this</span> = $(<span class="keyword">this</span>);</span><br><span class="line">    ($<span class="keyword">this</span>.val() === <span class="string">''</span>)? $<span class="keyword">this</span>.val(<span class="string">'请搜索...'</span>) : <span class="literal">null</span>;</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure>
<h4 id="部分刷新">部分刷新</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">  $(<span class="string">"#content"</span>).load(url);</span><br><span class="line"> &#125;, <span class="number">5000</span>);</span><br></pre></td></tr></table></figure>
<h4 id="密码强度">密码强度</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//密码为八位及以上并且字母数字特殊字符三项都包括</span></span><br><span class="line"><span class="keyword">var</span> strongRegex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"^(?=.&#123;8,&#125;)(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*\\W).*$"</span>, <span class="string">"g"</span>);</span><br><span class="line"><span class="comment">//密码为七位及以上并且字母、数字、特殊字符三项中有两项，强度是中等 </span></span><br><span class="line"><span class="keyword">var</span> mediumRegex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"^(?=.&#123;7,&#125;)(((?=.*[A-Z])(?=.*[a-z]))|((?=.*[A-Z])(?=.*[0-9]))|((?=.*[a-z])(?=.*[0-9]))).*$"</span>, <span class="string">"g"</span>);</span><br><span class="line"><span class="comment">//更多字符</span></span><br><span class="line"><span class="keyword">var</span> enoughRegex = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(?=.&#123;6,&#125;).*"</span>, <span class="string">"g"</span>);</span><br></pre></td></tr></table></figure>
<h4 id="滚动动态加载内容">滚动动态加载内容</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> loading = <span class="literal">false</span>;</span><br><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="keyword">if</span>((($(<span class="built_in">window</span>).scrollTop()+$(<span class="built_in">window</span>).height())+<span class="number">250</span>)&gt;=$(<span class="built_in">document</span>).height())&#123;</span><br><span class="line">   <span class="keyword">if</span>(loading == <span class="literal">false</span>)&#123;</span><br><span class="line">      loading = <span class="literal">true</span>;</span><br><span class="line">      $(<span class="string">'#loadingbar'</span>).css(<span class="string">"display"</span>,<span class="string">"block"</span>);</span><br><span class="line">      $.ajax(&#123;</span><br><span class="line">		  url:<span class="string">'/getData.json'</span>,</span><br><span class="line">		  type:<span class="string">'POST'</span>,</span><br><span class="line">		  dataType:<span class="string">'json'</span>,</span><br><span class="line">		  data:&#123;</span><br><span class="line">			  id:<span class="string">'123'</span></span><br><span class="line">		  &#125;</span><br><span class="line">	  &#125;).done(<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">		  <span class="keyword">if</span>(data.ret)&#123;</span><br><span class="line">		  &#125;</span><br><span class="line">	  &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="string">``</span><span class="string">`javascript</span><br><span class="line"></span><br><span class="line">#### url参数转对象</span><br><span class="line">`</span><span class="string">``</span>javascript</span><br><span class="line"><span class="keyword">var</span> search = location.search.substr(<span class="number">1</span>);</span><br><span class="line">    obj = &#123;&#125;;</span><br><span class="line">search.replace(<span class="regexp">/([^?&amp;]+)=([^?&amp;]+)/g</span>, <span class="function"><span class="keyword">function</span>(<span class="params">s, v, k</span>) </span>&#123;</span><br><span class="line">    obj[v] = <span class="built_in">decodeURIComponent</span>(k);</span><br><span class="line">    <span class="keyword">return</span> k + <span class="string">'='</span> +  v;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>]]></content>
    <summary type="html">
    <![CDATA[<h4 id="getBoundingClientRect">getBoundingClientRect</h4><blockquote>
<p>计算视口坐标,方法返回一个有left、right、top、bottom属性的对象，分别表示元素四个位置的相对于视口的坐标。getBoundingClientRect所返回的坐标包含元素的内边距和边框，不包含外边距。兼容性很好，非常好用.</p>
</blockquote>
<h4 id="scrollIntoView">scrollIntoView</h4><blockquote>
<p>可以让元素直接呈现到可视区域，实际上是屏幕显示区的最顶端<br>]]>
    
    </summary>
    
      <category term="web" scheme="http://www.xuerlove.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[异步javascript]]></title>
    <link href="http://www.xuerlove.com/2015/11/18/%E5%BC%82%E6%AD%A5javascript/"/>
    <id>http://www.xuerlove.com/2015/11/18/异步javascript/</id>
    <published>2015-11-18T07:03:01.000Z</published>
    <updated>2016-12-07T12:04:41.000Z</updated>
    <content type="html"><![CDATA[<h4 id="什么是异步javascript">什么是异步javascript</h4><blockquote>
<p>顺序的执行的代码，我们称之为同步代码，异步的过程就是让有些非常耗时的javascript代码放在异步模块中之行，同步代码之行结束后再去之行它。</p>
</blockquote>
<h4 id="异步javascript发展过程">异步javascript发展过程</h4><ul>
<li>回调函数<br>  函数可以作为参数传递给另一个函数，这样的过程称之为回调，当执行完函数的内容后，执行回调函数，来完成异步的模拟。<br>  回调函数可以使程序编的简单易懂，但是耦合性确比较高，维护起来比较麻烦。错误处理容易被忽视，不能return,使用不当会让程序非常臃肿。<a id="more"></a></li>
<li>事件监听<br>  通过事件监听，触发达到异步执行代码的过程。</li>
<li>发布订阅<br>  我们可以创建发布／订阅模式，或者观察者模式，通过订阅，发布的过程来实现异步</li>
<li>Promises<br>  Promises是一种规范，Promises允许我们通过链式调用的方式编写代码，增强了代码的可读性。</li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h4 id="什么是异步javascript">什么是异步javascript</h4><blockquote>
<p>顺序的执行的代码，我们称之为同步代码，异步的过程就是让有些非常耗时的javascript代码放在异步模块中之行，同步代码之行结束后再去之行它。</p>
</blockquote>
<h4 id="异步javascript发展过程">异步javascript发展过程</h4><ul>
<li>回调函数<br>  函数可以作为参数传递给另一个函数，这样的过程称之为回调，当执行完函数的内容后，执行回调函数，来完成异步的模拟。<br>  回调函数可以使程序编的简单易懂，但是耦合性确比较高，维护起来比较麻烦。错误处理容易被忽视，不能return,使用不当会让程序非常臃肿。]]>
    
    </summary>
    
      <category term="javascript" scheme="http://www.xuerlove.com/tags/javascript/"/>
    
  </entry>
  
</feed>
